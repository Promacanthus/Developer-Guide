<!DOCTYPE html>
<html lang="en-us">
  <head><link rel="icon" href="/favicon_main.svg"><meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta http-equiv="x-ua-compatible" content="ie=edge" /><meta property="og:url"  content="http://localhost:1313/go%E8%AF%AD%E8%A8%80/%E6%A0%87%E5%87%86%E5%BA%93/package-net/http/" />
    <meta property="og:type" content="article" /><meta property="og:title" content="http.md" /><meta property="og:description" content="http.md" /><meta property="og:image:width"  content="600" />
        <meta property="og:image:height" content="400" /><meta property="og:image" content="http://localhost:1313/images/default_summary_hu2be732aee21a2469ead3fe1f2df8caca_2088687_600x0_resize_q75_box.jpg" /><title>Promacanthus</title>
    
<link href="https://fonts.googleapis.com/css?family=Open&#43;Sans" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open&#43;Sans" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open&#43;Sans" rel="stylesheet"><link rel="stylesheet" type="text/css" href="/style.sass" integrity="">
<link rel="stylesheet" type="text/css" href="/css/monokai-sublime.9.15.8.min.91376415864fdd3a92be524052267afece4bdb1bb8c6c754f5e60c5ac28e93be.css" integrity="sha256-kTdkFYZP3TqSvlJAUiZ6/s5L2xu4xsdU9eYMWsKOk74=">
<link rel="stylesheet" type="text/css" href="/css/icons.f72c0103ff9598115ab2a76351494b950570479ce3f1795fec13fc62e4185dcf.css" integrity="sha256-9ywBA/&#43;VmBFasqdjUUlLlQVwR5zj8Xlf7BP8YuQYXc8=">
<link rel="stylesheet" type="text/css" href="/css/refresh.a55f73bd3031566bede1873d229fc74559352e7072fc322debef4b7ea58f58b8.css" integrity="sha256-pV9zvTAxVmvt4Yc9Ip/HRVk1LnBy/DIt6&#43;9LfqWPWLg=">
<link rel="stylesheet" type="text/css" href="/css/devicon.min.149016fbf45c8bc157d6f55ce3ee875feaa3f90446bf7d151fbc16a9f21a8859.css" integrity="sha256-FJAW&#43;/Rci8FX1vVc4&#43;6HX&#43;qj&#43;QRGv30VH7wWqfIaiFk=">
  </head>
  <body>
     

    <div id="preloader">
      <div id="status"></div>
    </div><nav class="navbar is-fresh is-transparent no-shadow" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">

      
      
      
      <a class="navbar-item">
        <div class="menu-icon-wrapper left-menu-icon-wrapper" style="visibility: visible;">
          <svg width="1000px" height="1000px">
            <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
            <path class="path2" d="M 300 500 L 700 500"></path>
            <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
          </svg>
          <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
        </div>
        <div class="navbar-item left-menu-icon-wrapper">
          分类
        </div>
      </a>

      <div class="navbar-item is-expanded"></div>
      <a class="navbar-item is-hidden-desktop">  
        <div data-target="navbar-menu" class="navbar-item right-menu-icon-wrapper is-hidden-desktop">
          Menu
        </div>
        <div data-target="navbar-menu" class="menu-icon-wrapper right-menu-icon-wrapper" style="visibility: visible;">
          <svg width="1000px" height="1000px">
            <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
            <path class="path2" d="M 300 500 L 700 500"></path>
            <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
          </svg>
          <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
        </div>
      </a>
    </div>

    

    <div id="navbar-menu" class="navbar-menu is-static">
      
      <div class="navbar-end">
        
          <a href="/" class="navbar-item is-secondary">主页</a><a href="/%E5%85%B3%E4%BA%8E/" class="navbar-item is-secondary">关于</a>
          <div class="navbar-item has-dropdown is-hoverable">
            <a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" class="navbar-link">微服务</a>
            <div class="navbar-dropdown">
              <a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%9A%E5%8A%A1/" class="navbar-item">微服务业务</a><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%B9%B3%E5%8F%B0/" class="navbar-item">微服务平台</a><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/" class="navbar-item">领域驱动设计</a></div>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/" class="navbar-link">填坑记</a>
            <div class="navbar-dropdown">
              <a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/traefik/" class="navbar-item">Traefik</a><a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/mysql/" class="navbar-item">MySQL</a><a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/kubernetes/" class="navbar-item">Kubernetes</a><a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/http/" class="navbar-item">HTTP</a><a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/golang/" class="navbar-item">Golang</a><a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/docker/" class="navbar-item">Docker</a></div>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" class="navbar-link">开发框架</a>
            <div class="navbar-dropdown">
              <a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/webassembly/" class="navbar-item">WebAssembly</a><a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/protocol-buffers/" class="navbar-item">Protocol Buffers</a><a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/grpc/" class="navbar-item">GRPC</a><a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/go-web/" class="navbar-item">Go Web</a><a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/go-kit/" class="navbar-item">Go Kit</a></div>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a href="/%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" class="navbar-link">集成开发环境</a>
            <div class="navbar-dropdown">
              <a href="/%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/vscode/" class="navbar-item">VSCode</a><a href="/%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/goland/" class="navbar-item">Goland</a></div>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a href="/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/" class="navbar-link">常用工具</a>
            <div class="navbar-dropdown">
              <a href="/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/git/" class="navbar-item">Git</a><a href="/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="navbar-item">正则表达式</a></div>
          </div><a href="/%E4%BA%A7%E5%93%81%E6%89%8B%E5%86%8C/" class="navbar-item is-secondary">产品手册</a>
          <div class="navbar-item has-dropdown is-hoverable">
            <a href="/go%E8%AF%AD%E8%A8%80/" class="navbar-link">Go语言</a>
            <div class="navbar-dropdown">
              <a href="/go%E8%AF%AD%E8%A8%80/%E6%A0%B7%E4%BE%8B%E4%BB%A3%E7%A0%81/" class="navbar-item">样例代码</a><a href="/go%E8%AF%AD%E8%A8%80/%E5%AE%98%E6%96%B9%E6%96%87%E7%AB%A0/" class="navbar-item">官方文章</a><a href="/go%E8%AF%AD%E8%A8%80/%E6%A0%87%E5%87%86%E5%BA%93/" class="navbar-item">标准库</a><a href="/go%E8%AF%AD%E8%A8%80/%E5%9F%BA%E7%A1%80/" class="navbar-item">基础</a></div>
          </div>
          <div class="navbar-item has-dropdown is-hoverable">
            <a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/" class="navbar-link">云原生</a>
            <div class="navbar-dropdown">
              <a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/etcd/" class="navbar-item">Etcd</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" class="navbar-item">开发环境配置</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/traefik/" class="navbar-item">Traefik</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/service-mesh/" class="navbar-item">Service Mesh</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/ingress/" class="navbar-item">Ingress</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/" class="navbar-item">Helm</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/docker/" class="navbar-item">Docker</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/" class="navbar-item">Kubernetes</a></div>
          </div></div>
    </div>




  </div>
</nav>
<nav id="navbar-clone" class="navbar is-fresh is-transparent" role="navigation" aria-label="main navigation">
  <div class="container">
      <div class="navbar-brand">
  
        
        
        
        <a class="navbar-item">
          <div class="menu-icon-wrapper left-menu-icon-wrapper" style="visibility: visible;">
            <svg width="1000px" height="1000px">
              <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
              <path class="path2" d="M 300 500 L 700 500"></path>
              <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
            </svg>
            <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
          </div>
          <div class="navbar-item left-menu-icon-wrapper">
            分类
          </div>
        </a>
  
        <div class="navbar-item is-expanded"></div>
        <a class="navbar-item is-hidden-desktop">  
          <div data-target="cloned-navbar-menu" class="navbar-item right-menu-icon-wrapper is-hidden-desktop">
            Menu
          </div>
          <div data-target="cloned-navbar-menu" class="menu-icon-wrapper right-menu-icon-wrapper" style="visibility: visible;">
            <svg width="1000px" height="1000px">
              <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
              <path class="path2" d="M 300 500 L 700 500"></path>
              <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
            </svg>
            <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
          </div>
        </a>
      </div>
  
      
  
      <div id="cloned-navbar-menu" class="navbar-menu is-static">
        <div class="navbar-end"><a href="/" class="navbar-item is-secondary">主页</a><a href="/%E5%85%B3%E4%BA%8E/" class="navbar-item is-secondary">关于</a><div class="navbar-item has-dropdown is-hoverable">
              <a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" class="navbar-link">微服务</a>
              <div class="navbar-dropdown">
                <a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%B8%9A%E5%8A%A1/" class="navbar-item">微服务业务</a><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%B9%B3%E5%8F%B0/" class="navbar-item">微服务平台</a><a href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/" class="navbar-item">领域驱动设计</a></div>
            </div><div class="navbar-item has-dropdown is-hoverable">
              <a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/" class="navbar-link">填坑记</a>
              <div class="navbar-dropdown">
                <a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/traefik/" class="navbar-item">Traefik</a><a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/mysql/" class="navbar-item">MySQL</a><a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/kubernetes/" class="navbar-item">Kubernetes</a><a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/http/" class="navbar-item">HTTP</a><a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/golang/" class="navbar-item">Golang</a><a href="/%E5%A1%AB%E5%9D%91%E8%AE%B0/docker/" class="navbar-item">Docker</a></div>
            </div><div class="navbar-item has-dropdown is-hoverable">
              <a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" class="navbar-link">开发框架</a>
              <div class="navbar-dropdown">
                <a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/webassembly/" class="navbar-item">WebAssembly</a><a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/protocol-buffers/" class="navbar-item">Protocol Buffers</a><a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/grpc/" class="navbar-item">GRPC</a><a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/go-web/" class="navbar-item">Go Web</a><a href="/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/go-kit/" class="navbar-item">Go Kit</a></div>
            </div><div class="navbar-item has-dropdown is-hoverable">
              <a href="/%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" class="navbar-link">集成开发环境</a>
              <div class="navbar-dropdown">
                <a href="/%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/vscode/" class="navbar-item">VSCode</a><a href="/%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/goland/" class="navbar-item">Goland</a></div>
            </div><div class="navbar-item has-dropdown is-hoverable">
              <a href="/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/" class="navbar-link">常用工具</a>
              <div class="navbar-dropdown">
                <a href="/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/git/" class="navbar-item">Git</a><a href="/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="navbar-item">正则表达式</a></div>
            </div><a href="/%E4%BA%A7%E5%93%81%E6%89%8B%E5%86%8C/" class="navbar-item is-secondary">产品手册</a><div class="navbar-item has-dropdown is-hoverable">
              <a href="/go%E8%AF%AD%E8%A8%80/" class="navbar-link">Go语言</a>
              <div class="navbar-dropdown">
                <a href="/go%E8%AF%AD%E8%A8%80/%E6%A0%B7%E4%BE%8B%E4%BB%A3%E7%A0%81/" class="navbar-item">样例代码</a><a href="/go%E8%AF%AD%E8%A8%80/%E5%AE%98%E6%96%B9%E6%96%87%E7%AB%A0/" class="navbar-item">官方文章</a><a href="/go%E8%AF%AD%E8%A8%80/%E6%A0%87%E5%87%86%E5%BA%93/" class="navbar-item">标准库</a><a href="/go%E8%AF%AD%E8%A8%80/%E5%9F%BA%E7%A1%80/" class="navbar-item">基础</a></div>
            </div><div class="navbar-item has-dropdown is-hoverable">
              <a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/" class="navbar-link">云原生</a>
              <div class="navbar-dropdown">
                <a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/etcd/" class="navbar-item">Etcd</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" class="navbar-item">开发环境配置</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/traefik/" class="navbar-item">Traefik</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/service-mesh/" class="navbar-item">Service Mesh</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/ingress/" class="navbar-item">Ingress</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/helm/" class="navbar-item">Helm</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/docker/" class="navbar-item">Docker</a><a href="/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/" class="navbar-item">Kubernetes</a></div>
            </div></div>
      </div>
  
  
  
  
    </div>
  </nav>
<section class="section is-medium">
  <div class="container">
    <div class="columns">
      <div class="column is-centered-tablet-portrait">
        <h1 class="title is-2 section-title">http.md</h1>
        <h5 class="subtitle is-5 is-muted"></h5>
        <div class="divider"></div>
        
        <section class="section content has-text-justified">
          <h1 id="package-http">package http</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;net/http&#34;</span>
</code></pre></div><p>http包提供HTTP客户端和服务端实现。</p>
<p>Get、Head、Post和PostForm发起HTTP（或HTTPS）请求：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">resp</span> , <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;http://example.com/&#34;</span>)
<span style="color:#f92672">...</span>
<span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Post</span>(<span style="color:#e6db74">&#34;http://example.com/upload&#34;</span>,<span style="color:#e6db74">&#34;image/jpeg&#34;</span>,<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">buf</span>)
<span style="color:#f92672">...</span>
<span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">PostForm</span>(<span style="color:#e6db74">&#34;http://example.com/form&#34;</span>,
    <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Values</span>{<span style="color:#e6db74">&#34;Key&#34;</span>:{<span style="color:#e6db74">&#34;Value&#34;</span>}, <span style="color:#e6db74">&#34;id&#34;</span>:{<span style="color:#e6db74">&#34;123&#34;</span>}})
</code></pre></div><p>结束后，客户端必须关闭响应体：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;http://example.com&#34;</span>)
<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
    <span style="color:#75715e">// handle error
</span><span style="color:#75715e"></span>}
<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">Body</span>.<span style="color:#a6e22e">Close</span>()
<span style="color:#a6e22e">body</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadAll</span>(<span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">Body</span>)
</code></pre></div><p>想要控制HTTP客户端的头、重定向策略和其他设置，需要创建一个<code>Client</code>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">client</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Client</span>{
    <span style="color:#a6e22e">CheckRedirect</span>: <span style="color:#a6e22e">redirectPolicyFunc</span>,
}

<span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;http://example.com&#34;</span>)
<span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">NewRequest</span>(<span style="color:#e6db74">&#34;GET&#34;</span>,<span style="color:#e6db74">&#34;http://example.com&#34;</span>,<span style="color:#66d9ef">nil</span>)
<span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">Header</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#e6db74">&#34;if-None-Match&#34;</span>,<span style="color:#e6db74">`W/&#34;wyzzy&#34;`</span>)
<span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">Do</span>(<span style="color:#a6e22e">req</span>)
<span style="color:#75715e">// ...
</span></code></pre></div><p>想要控制代理，TLS配置，keep-alive，压缩和其他设置，需要创建一个<code>Transport</code>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">tr</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Transport</span>{
    <span style="color:#a6e22e">MaxldleConns</span>: <span style="color:#ae81ff">10</span>,
    <span style="color:#a6e22e">ldleConnTimeout</span>: <span style="color:#ae81ff">30</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>,
    <span style="color:#a6e22e">DisableCompression</span>: <span style="color:#66d9ef">true</span>,
}
<span style="color:#a6e22e">client</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Client</span>{<span style="color:#a6e22e">Transport</span>: <span style="color:#a6e22e">tr</span>}
<span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;https://example.com&#34;</span>)
</code></pre></div><p><code>Client</code>和<code>Transport</code>可以安全地被多个<code>goroutine</code>并发使用，为了高效应该只创建一次并重复使用。</p>
<p><code>ListenAndServe</code>使用给定地址和handler启动一个HTTP服务端。这个handler通常是<code>nil</code>，这表示使用<code>DefaultServeMux</code>。<code>Handle</code>和<code>HandleFunc</code>将handler添加到<code>DefaultServeMux</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Handle</span>(<span style="color:#e6db74">&#34;/foo&#34;</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">fooHandler</span>)

<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/bar&#34;</span>,<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>){
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Fprintf</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;Hello,%q&#34;</span>, <span style="color:#a6e22e">html</span>.<span style="color:#a6e22e">EscapeString</span>(<span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">URL</span>, <span style="color:#a6e22e">Path</span>))
})

<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>, <span style="color:#66d9ef">nil</span>))
</code></pre></div><p>创建一个自定义的Server来更好的控制服务端的行为：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Server</span>{
    <span style="color:#a6e22e">Addr</span> :              <span style="color:#e6db74">&#34;:8080&#34;</span>,
    <span style="color:#a6e22e">Handler</span>:            <span style="color:#a6e22e">myHandler</span>,
    <span style="color:#a6e22e">ReadTimeout</span>:    <span style="color:#ae81ff">10</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>,
    <span style="color:#a6e22e">WriteTimeout</span>:   <span style="color:#ae81ff">10</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>,
    <span style="color:#a6e22e">MaxHeaderBytes</span>: <span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">20</span>,
    }

<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">ListenAndServe</span>())
</code></pre></div><p>从Go 1.6开始，使用HTTPS时，http包对<code>HTTP/2</code>协议具有透明支持。</p>
<p>必须禁用<code>HTTP/2</code>的程序可以通过设置<code>Transport.TLSNextProto</code>(客户端设置)或者<code>Server.TLSNextProto</code>(服务端设置)的值为非nil的空map。或者，当前支持如下的<code>GODEBUG</code>环境变量：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">GODEBUG</span>=<span style="color:#a6e22e">http2client</span>=<span style="color:#ae81ff">0</span> <span style="color:#75715e">// 禁用HTTP/2客户端支持
</span><span style="color:#75715e"></span><span style="color:#a6e22e">GODEBUG</span>=<span style="color:#a6e22e">http2server</span>=<span style="color:#ae81ff">0</span> <span style="color:#75715e">// 禁用HTTP/2服务端支持
</span><span style="color:#75715e"></span><span style="color:#a6e22e">GODEBUG</span>=<span style="color:#a6e22e">http2debug</span>=<span style="color:#ae81ff">1</span> <span style="color:#75715e">// 启动详细的HTTP/2调试日志
</span><span style="color:#75715e"></span><span style="color:#a6e22e">GODEBUG</span>=<span style="color:#a6e22e">http2debug</span>=<span style="color:#ae81ff">2</span> <span style="color:#75715e">// 更详细的日志，包含 frame dumps
</span></code></pre></div><p>Go的API兼容性保证不涵盖GODEBUG变量。在禁用<code>HTTP/2</code>支持之前，请报告所有问题：<code>https://golang.org/s/http2bug</code></p>
<p>为了简化配置， http 包中的<code>Transport</code>和<code>Server</code>都自动启动<code>HTTP/2</code>支持。要为更复杂的配置启用<code>HTTP/2</code>，以使用低级别<code>HTTP/2</code>功能或使用Go的http2软件包的新版本，请直接导入 <code>golang.org/x/net/http2</code> 并使用其<code>ConfigureTransport</code>或<code>ConfigureServer</code>功能。通过<code>golang.org/x/net/http2</code>包手动配置<code>HTTP/2</code>优先于<code>net/http</code>包的内置<code>HTTP/2</code>支持。</p>
<h2 id="constants">Constants</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> (
    <span style="color:#a6e22e">MethodGet</span>     = <span style="color:#e6db74">&#34;GET&#34;</span>
    <span style="color:#a6e22e">MethodHead</span>    = <span style="color:#e6db74">&#34;HEAD&#34;</span>
    <span style="color:#a6e22e">MethodPost</span>    = <span style="color:#e6db74">&#34;POST&#34;</span>
    <span style="color:#a6e22e">MethodPut</span>     = <span style="color:#e6db74">&#34;PUT&#34;</span>
    <span style="color:#a6e22e">MethodPath</span>    = <span style="color:#e6db74">&#34;PATCH&#34;</span> <span style="color:#75715e">// RFC 5789
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">MethodDelete</span>  = <span style="color:#e6db74">&#34;DELETE&#34;</span>
    <span style="color:#a6e22e">MethodConnect</span> = <span style="color:#e6db74">&#34;CONNECT&#34;</span>
    <span style="color:#a6e22e">MethodOptions</span> = <span style="color:#e6db74">&#34;OPTIONS&#34;</span>
    <span style="color:#a6e22e">MethodTrace</span>   = <span style="color:#e6db74">&#34;TRACE&#34;</span>
)
</code></pre></div><p>常见的HTTP方法。</p>
<p>除非另有说明，否则它们在<a href="http://tools.ietf.org/html/rfc7231#section-4.3">RFC 7231第4.3节</a>中定义。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> (
    <span style="color:#a6e22e">StatusContinue</span>           = <span style="color:#ae81ff">100</span> <span style="color:#75715e">// RFC 7231, 6.2.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusSwitchingProtocols</span> = <span style="color:#ae81ff">101</span> <span style="color:#75715e">// RFC 7231, 6.2.2
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusProcessing</span>         = <span style="color:#ae81ff">102</span> <span style="color:#75715e">// RFC 2518, 10.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusEarlyHints</span>         = <span style="color:#ae81ff">103</span> <span style="color:#75715e">// RFC 8297
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">StatusOK</span>                   = <span style="color:#ae81ff">200</span> <span style="color:#75715e">// RFC 7231, 6.3.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusCreated</span>              = <span style="color:#ae81ff">201</span> <span style="color:#75715e">// RFC 7231, 6.3.2
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusAccepted</span>             = <span style="color:#ae81ff">202</span> <span style="color:#75715e">// RFC 7231, 6.3.3
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusNonAuthoritativeInfo</span> = <span style="color:#ae81ff">203</span> <span style="color:#75715e">// RFC 7231, 6.3.4
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusNoContent</span>            = <span style="color:#ae81ff">204</span> <span style="color:#75715e">// RFC 7231, 6.3.5
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusResetContent</span>         = <span style="color:#ae81ff">205</span> <span style="color:#75715e">// RFC 7231, 6.3.6
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusPartialContent</span>       = <span style="color:#ae81ff">206</span> <span style="color:#75715e">// RFC 7233, 4.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusMultiStatus</span>          = <span style="color:#ae81ff">207</span> <span style="color:#75715e">// RFC 4918, 11.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusAlreadyReported</span>      = <span style="color:#ae81ff">208</span> <span style="color:#75715e">// RFC 5842, 7.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusIMUsed</span>               = <span style="color:#ae81ff">226</span> <span style="color:#75715e">// RFC 3229, 10.4.1
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">StatusMultipleChoices</span>  = <span style="color:#ae81ff">300</span> <span style="color:#75715e">// RFC 7231, 6.4.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusMovedPermanently</span> = <span style="color:#ae81ff">301</span> <span style="color:#75715e">// RFC 7231, 6.4.2
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusFound</span>            = <span style="color:#ae81ff">302</span> <span style="color:#75715e">// RFC 7231, 6.4.3
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusSeeOther</span>         = <span style="color:#ae81ff">303</span> <span style="color:#75715e">// RFC 7231, 6.4.4
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusNotModified</span>      = <span style="color:#ae81ff">304</span> <span style="color:#75715e">// RFC 7232, 4.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusUseProxy</span>         = <span style="color:#ae81ff">305</span> <span style="color:#75715e">// RFC 7231, 6.4.5
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">StatusTemporaryRedirect</span> = <span style="color:#ae81ff">307</span> <span style="color:#75715e">// RFC 7231, 6.4.7
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusPermanentRedirect</span> = <span style="color:#ae81ff">308</span> <span style="color:#75715e">// RFC 7538, 3
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">StatusBadRequest</span>                   = <span style="color:#ae81ff">400</span> <span style="color:#75715e">// RFC 7231, 6.5.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusUnauthorized</span>                 = <span style="color:#ae81ff">401</span> <span style="color:#75715e">// RFC 7235, 3.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusPaymentRequired</span>              = <span style="color:#ae81ff">402</span> <span style="color:#75715e">// RFC 7231, 6.5.2
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusForbidden</span>                    = <span style="color:#ae81ff">403</span> <span style="color:#75715e">// RFC 7231, 6.5.3
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusNotFound</span>                     = <span style="color:#ae81ff">404</span> <span style="color:#75715e">// RFC 7231, 6.5.4
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusMethodNotAllowed</span>             = <span style="color:#ae81ff">405</span> <span style="color:#75715e">// RFC 7231, 6.5.5
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusNotAcceptable</span>                = <span style="color:#ae81ff">406</span> <span style="color:#75715e">// RFC 7231, 6.5.6
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusProxyAuthRequired</span>            = <span style="color:#ae81ff">407</span> <span style="color:#75715e">// RFC 7235, 3.2
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusRequestTimeout</span>               = <span style="color:#ae81ff">408</span> <span style="color:#75715e">// RFC 7231, 6.5.7
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusConflict</span>                     = <span style="color:#ae81ff">409</span> <span style="color:#75715e">// RFC 7231, 6.5.8
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusGone</span>                         = <span style="color:#ae81ff">410</span> <span style="color:#75715e">// RFC 7231, 6.5.9
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusLengthRequired</span>               = <span style="color:#ae81ff">411</span> <span style="color:#75715e">// RFC 7231, 6.5.10
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusPreconditionFailed</span>           = <span style="color:#ae81ff">412</span> <span style="color:#75715e">// RFC 7232, 4.2
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusRequestEntityTooLarge</span>        = <span style="color:#ae81ff">413</span> <span style="color:#75715e">// RFC 7231, 6.5.11
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusRequestURITooLong</span>            = <span style="color:#ae81ff">414</span> <span style="color:#75715e">// RFC 7231, 6.5.12
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusUnsupportedMediaType</span>         = <span style="color:#ae81ff">415</span> <span style="color:#75715e">// RFC 7231, 6.5.13
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusRequestedRangeNotSatisfiable</span> = <span style="color:#ae81ff">416</span> <span style="color:#75715e">// RFC 7233, 4.4
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusExpectationFailed</span>            = <span style="color:#ae81ff">417</span> <span style="color:#75715e">// RFC 7231, 6.5.14
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusTeapot</span>                       = <span style="color:#ae81ff">418</span> <span style="color:#75715e">// RFC 7168, 2.3.3
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusMisdirectedRequest</span>           = <span style="color:#ae81ff">421</span> <span style="color:#75715e">// RFC 7540, 9.1.2
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusUnprocessableEntity</span>          = <span style="color:#ae81ff">422</span> <span style="color:#75715e">// RFC 4918, 11.2
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusLocked</span>                       = <span style="color:#ae81ff">423</span> <span style="color:#75715e">// RFC 4918, 11.3
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusFailedDependency</span>             = <span style="color:#ae81ff">424</span> <span style="color:#75715e">// RFC 4918, 11.4
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusTooEarly</span>                     = <span style="color:#ae81ff">425</span> <span style="color:#75715e">// RFC 8470, 5.2.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusUpgradeRequired</span>              = <span style="color:#ae81ff">426</span> <span style="color:#75715e">// RFC 7231, 6.5.15
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusPreconditionRequired</span>         = <span style="color:#ae81ff">428</span> <span style="color:#75715e">// RFC 6585, 3
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusTooManyRequests</span>              = <span style="color:#ae81ff">429</span> <span style="color:#75715e">// RFC 6585, 4
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusRequestHeaderFieldsTooLarge</span>  = <span style="color:#ae81ff">431</span> <span style="color:#75715e">// RFC 6585, 5
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusUnavailableForLegalReasons</span>   = <span style="color:#ae81ff">451</span> <span style="color:#75715e">// RFC 7725, 3
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">StatusInternalServerError</span>           = <span style="color:#ae81ff">500</span> <span style="color:#75715e">// RFC 7231, 6.6.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusNotImplemented</span>                = <span style="color:#ae81ff">501</span> <span style="color:#75715e">// RFC 7231, 6.6.2
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusBadGateway</span>                    = <span style="color:#ae81ff">502</span> <span style="color:#75715e">// RFC 7231, 6.6.3
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusServiceUnavailable</span>            = <span style="color:#ae81ff">503</span> <span style="color:#75715e">// RFC 7231, 6.6.4
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusGatewayTimeout</span>                = <span style="color:#ae81ff">504</span> <span style="color:#75715e">// RFC 7231, 6.6.5
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusHTTPVersionNotSupported</span>       = <span style="color:#ae81ff">505</span> <span style="color:#75715e">// RFC 7231, 6.6.6
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusVariantAlsoNegotiates</span>         = <span style="color:#ae81ff">506</span> <span style="color:#75715e">// RFC 2295, 8.1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusInsufficientStorage</span>           = <span style="color:#ae81ff">507</span> <span style="color:#75715e">// RFC 4918, 11.5
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusLoopDetected</span>                  = <span style="color:#ae81ff">508</span> <span style="color:#75715e">// RFC 5842, 7.2
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusNotExtended</span>                   = <span style="color:#ae81ff">510</span> <span style="color:#75715e">// RFC 2774, 7
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusNetworkAuthenticationRequired</span> = <span style="color:#ae81ff">511</span> <span style="color:#75715e">// RFC 6585, 6
</span><span style="color:#75715e"></span>)
</code></pre></div><p>注册在IANA上的HTTP状态码，查看： <code>https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">DefaultMaxHeaderBytes</span> = <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">20</span> <span style="color:#75715e">// 1 MB
</span></code></pre></div><p><code>DefaultMaxHeaderBytes</code>是HTTP请求头的最大允许大小。可以通过设置<code>Server.MaxHeaderBytes</code>来覆盖它。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">DefaultMaxIdleConnsPerHost</span> = <span style="color:#ae81ff">2</span>
</code></pre></div><p><code>DefaultMaxIdleConnsPerHost</code>是<code>Transport</code>的<code>MaxIdleConnsPerHost</code>的默认值。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">TimeFormat</span> = <span style="color:#e6db74">&#34;Mon, 02 Jan 2006 15:04:05 GMT&#34;</span>
</code></pre></div><p><code>TimeFormat</code>是在HTTPHeader中生成时间时要使用的时间格式。就像<code>time.RFC1123</code>一样，但是将GMT硬编码为时区。格式化时间必须采用UTC格式才能生成正确的格式。</p>
<p>有关解析此时间格式的信息，请参见<code>ParseTime</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">TrailerPrefix</span> = <span style="color:#e6db74">&#34;Trailer:&#34;</span>
</code></pre></div><p><code>TrailerPrefix</code>是<code>ResponseWriter.Header</code>的map的键的前缀（如果存在的话），表示map条目实际上是用于响应尾部的，而不是响应头的。<code>ServeHTTP</code>调用完成后，前缀将被删除，并且值将在尾部中发送。</p>
<p>此机制仅适用于在写入Header之前未知的Trailer。如果在写Header之前固定的或已知的尾Trailer，则首选普通的Go Trailer机制：</p>
<p><a href="https://golang.org/pkg/net/http/#ResponseWriter"><a href="https://golang.org/pkg/net/http/#ResponseWriter">https://golang.org/pkg/net/http/#ResponseWriter</a></a></p>
<p><a href="https://golang.org/pkg/net/http/#example_ResponseWriter_trailers"><a href="https://golang.org/pkg/net/http/#example_ResponseWriter_trailers">https://golang.org/pkg/net/http/#example_ResponseWriter_trailers</a></a></p>
<h2 id="variables">Variables</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> (
    <span style="color:#75715e">// ErrNotSupported 是由Pusher的Push方法返回的，表示不可获得对HTTP/2的支持
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrNotSupported</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">ProtocolError</span>{<span style="color:#e6db74">&#34;feature not supported&#34;</span>}

    <span style="color:#75715e">// 弃用
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// net/http包中的任何方法都不会再返回 ErrUnexpectedTrailer
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 调用者不应该将错误与这个变量进行比较
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrUnexpectedTrailer</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">ProtocolError</span>{<span style="color:#e6db74">&#34;trailer header without chunked transfer encoding&#34;</span>}

    <span style="color:#75715e">// 当请求的 Content-Type 不包含一个“boundary”参数时，Request.MultipartReader 返回 ErrMissingBoundary
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrMissingBoundary</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">ProtocolError</span>{<span style="color:#e6db74">&#34;no multipart boundary param in Content-Type&#34;</span>}

    <span style="color:#75715e">// 当请求的 Content-Type 不是 multipart/form-data 时，Request.MultipartReader 返回 ErrNotMultipart
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrNotMultipart</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">ProtocolError</span>{<span style="color:#e6db74">&#34;request Content-Type isn&#39;t multipart/form-data&#34;</span>}

    <span style="color:#75715e">// 弃用
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// net/http包中的任何方法都不会再返回 ErrHeaderTooLong
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 调用者不应该将错误与这个变量进行比较
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrHeaderTooLong</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">ProtocolError</span>{<span style="color:#e6db74">&#34;header too long&#34;</span>}

    <span style="color:#75715e">// 弃用
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// net/http包中的任何方法都不会再返回 ErrShortBody
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 调用者不应该将错误与这个变量进行比较
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrShortBody</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">ProtocolError</span>{<span style="color:#e6db74">&#34;entity body too short&#34;</span>}

    <span style="color:#75715e">// 弃用
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// net/http包中的任何方法都不会再返回 ErrMissingContentLength
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 调用者不应该将错误与这个变量进行比较
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrMissingContentLength</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">ProtocolError</span>{<span style="color:#e6db74">&#34;missing ContentLength in HEAD response&#34;</span>}
)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> (
    <span style="color:#75715e">// HTTP方法或响应代码不允许body时，ResponseWriter.Write调用返回ErrBodyNotAllowed
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrBodyNotAllowed</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;http: request method or response status code does not allow body&#34;</span>)

    <span style="color:#75715e">// 当使用Hijacker接口时基础连接被劫持，ResponseWriter.Write 返回 ErrHijacked
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 在被劫持的连接上进行零字节写入将返回ErrHijacked，而不会产生任何其他副作用
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrHijacked</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;http: connection has been hijacked&#34;</span>)

    <span style="color:#75715e">// 当 Handler 为Content-Length响应头设置一个长度，然后尝试写入比声明更多的字节时，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// ResponseWriter.Write调用返回ErrContentLength
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrContentLength</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;http: wrote more than the declared Content-Length&#34;</span>)

    <span style="color:#75715e">// 弃用
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// net/http包中的任何方法都不会再返回 ErrWriteAfterFlush
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 调用者不应该将错误与这个变量进行比较
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrWriteAfterFlush</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;unused&#34;</span>)
)
</code></pre></div><p>HTTP服务端使用的错误。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> (
    <span style="color:#75715e">// ServerContextKey是 context key。可以在带有 Context.Value 的 HTTP handler 中
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 使用它来访问启动 handler 的服务器，关联的值将是*Server类型
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ServerContextKey</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">contextKey</span>{<span style="color:#e6db74">&#34;http-server&#34;</span>}

    <span style="color:#75715e">// LocalAddrContextKey是context key。 可以在带有Context.Value的HTTP handler中使用它来访问连接的本地地址
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 关联的值将为net.Addr类型。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">LocalAddrContextKey</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">contextKey</span>{<span style="color:#e6db74">&#34;local-addr&#34;</span>}
)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">DefaultClient</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Client</span>{}
</code></pre></div><p>DefaultClient是默认客户端，由Get，Head和Post使用。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">DefaultServeMux</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">defaultServeMux</span>
</code></pre></div><p>DefaultServeMux是Serve使用的默认ServeMux。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ErrAbortHandler</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;net/http: abort Handler&#34;</span>)
</code></pre></div><p><code>ErrAbortHandler</code>是一个中止panic值，用于中止handler。来自ServeHTTP的任何panic都会中止对客户端的响应，但是使用<code>ErrAbortHandler</code>进行panic也会抑制将堆栈跟踪记录到服务器的错误日志中。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ErrBodyReadAfterClose</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;http: invalid Read on closed Body&#34;</span>)
</code></pre></div><p>在关闭请求或响应体后，读取请求或响应体时，将返回<code>ErrBodyReadAfterClose</code>。通常在HTTPhandler在其<code>ResponseWriter</code>上调用<code>WriteHeader</code>或<code>Write</code>后读取Body时，会发生这种情况。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ErrHandlerTimeout</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;http: Handler timeout&#34;</span>)<span style="color:#a6e22e">s</span>
</code></pre></div><p>在已超时的handler上进行<code>ResponseWriter</code>的Write调用会返回<code>ErrHandlerTimeout</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ErrLineTooLong</span> = <span style="color:#a6e22e">internal</span>.<span style="color:#a6e22e">ErrLineTooLong</span>
</code></pre></div><p>读取分块编码异常的请求或响应体时，将返回<code>ErrLineTooLong</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ErrMissingFile</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;http: no such file&#34;</span>)
</code></pre></div><p>当提供的文件字段不存在于请求中或者它不是一个文件字段中时，FormFile返回<code>ErrMissingFile</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ErrNoCookie</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;http: named cookie not present&#34;</span>)
</code></pre></div><p>未找到Cookie时，Request的Cookie方法将返回<code>ErrNoCookie</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ErrNoLocation</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;http: no Location header in response&#34;</span>)
</code></pre></div><p>如果不存在LocationHeader，则由Response的Location方法返回<code>ErrNoLocation</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ErrServerClosed</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;http: Server closed&#34;</span>)
</code></pre></div><p>调用Shutdown或Close之后，服务器的Serve，ServeTLS，ListenAndServe和ListenAndServeTLS方法返回<code>ErrServerClosed</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ErrSkipAltProtocol</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;net/http: skip alternate protocol&#34;</span>)
</code></pre></div><p><code>ErrSkipAltProtocol</code>是由<code>Transport.RegisterProtocol</code>定义的标记错误值。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ErrUseLastResponse</span> = <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;net/http: use last response&#34;</span>)
</code></pre></div><p><code>Client.CheckRedirect</code> hooks 可以返回<code>ErrUseLastResponse</code>，以控制如何处理重定向。如果返回，则不发送下一个请求，并且返回最近的响应，且其Body未关闭。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">NoBody</span> = <span style="color:#a6e22e">noBody</span>{}
</code></pre></div><p><code>NoBody</code>是一个没有字节的<code>io.ReadCloser</code>。读取始终返回EOF，而关闭始终返回nil。可以在传出客户端请求中使用它来明确表示请求的字节数为零。也可以很容易的将<code>Request.Body</code>设置为nil。</p>
<h2 id="func-canonicalheaderkey">func CanonicalHeaderKey</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">CanonicalHeaderKey</span>(<span style="color:#a6e22e">s</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>
</code></pre></div><p><code>CanonicalHeaderKey</code>返回header key <code>s</code> 的规范格式。规范化将第一个字母和连字符后的任何字母转换为大写；其余的将转换为小写。例如，&ldquo;accept-encoding&quot;的规范格式是&quot;Accept-Encoding&rdquo;。如果 <code>s</code> 包含空格或无效的header field bytes，则返回它而无需进行任何修改。</p>
<h2 id="func-detectcontenttype">func DetectContentType</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">DetectContentType</span>(<span style="color:#a6e22e">data</span> []<span style="color:#66d9ef">byte</span>) <span style="color:#66d9ef">string</span>
</code></pre></div><p><code>DetectContentType</code>实现在<code>https://mimesniff.spec.whatwg.org/</code>上描述的算法，以确定给定数据的<code>Content-Type</code>。它最多考虑前512个字节的数据。 <code>DetectContentType</code>始终返回有效的<code>MIME</code>类型：如果无法确定更具体的类型，则返回<code>&quot;application/octet-stream&quot;</code>。</p>
<h2 id="func-error">func Error</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Error</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#66d9ef">error</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">code</span> <span style="color:#66d9ef">int</span>)
</code></pre></div><p>Error回复带有特定错误消息和HTTP代码的请求。否则，它不会结束请求；调用者应确保不再对<code>w</code>进行写操作。错误消息应为纯文本。</p>
<h2 id="func-handle">func Handle</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Handle</span>(<span style="color:#a6e22e">pattern</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">handler</span> <span style="color:#a6e22e">Handler</span>)
</code></pre></div><p><code>Handle</code>在<code>DefaultServeMux</code>中注册给定模式的handler。<code>ServeMux</code>的文档说明了如何匹配模式。</p>
<h3 id="handle-example">Handle Example</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;fmt&#34;</span>
    <span style="color:#e6db74">&#34;log&#34;</span>
    <span style="color:#e6db74">&#34;net/http&#34;</span>
    <span style="color:#e6db74">&#34;sync&#34;</span>
)

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">countHander</span> <span style="color:#66d9ef">struct</span>{
    <span style="color:#a6e22e">mu</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Mutex</span> <span style="color:#75715e">// guards n
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">n</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">countHandler</span>) <span style="color:#a6e22e">ServeHTTP</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>){
    <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">mu</span>.<span style="color:#a6e22e">Lock</span>()
    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">mu</span>.<span style="color:#a6e22e">Unlock</span>()
    <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">n</span><span style="color:#f92672">++</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Fprintf</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;count is %d\n&#34;</span>, <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">n</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>(){
    <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Handle</span>(<span style="color:#e6db74">&#34;/count&#34;</span>,new(<span style="color:#a6e22e">countHandler</span>))
    <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>,<span style="color:#66d9ef">nil</span>))
}
</code></pre></div><h2 id="func-handlefunc">func HandleFunc</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">HandleFunc</span>(<span style="color:#a6e22e">pattern</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">handler</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>))
</code></pre></div><p><code>HandleFunc</code>在<code>DefaultServeMux</code>中注册给定模式的处理函数。<code>ServeMux</code>的文档说明了如何匹配模式。</p>
<h3 id="handlefunc-example">HandleFunc Example</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">h1</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>){
    <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">WriteString</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;Hello from a HandleFunc #1!\n&#34;</span>)
}

<span style="color:#a6e22e">h2</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>){
    <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">WriteString</span>(<span style="color:#a6e22e">w</span>,<span style="color:#e6db74">&#34;Hello from a HandleFunc #2!\n&#34;</span>)
}

<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">h1</span>)
<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/endpoint&#34;</span>, <span style="color:#a6e22e">h2</span>)

<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>,<span style="color:#66d9ef">nil</span>))
</code></pre></div><h2 id="func-listenandserve">func ListenAndServe</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#a6e22e">addr</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">handler</span> <span style="color:#a6e22e">Handler</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p><code>ListenAndServe</code>监听TCP网络地址<code>addr</code>，然后调用带有handler的Serve来处理传入连接上的请求。能够接受的连接需要配置为启用TCP keep-alives。</p>
<p>该handler通常为nil，在这种情况下，将使用<code>DefaultServeMux</code>。</p>
<p><code>ListenAndServe</code>始终返回非nil错误。</p>
<h3 id="listenandserve-example">ListenAndServe Example</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">helloHandler</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>){
    <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">WriteString</span>(<span style="color:#a6e22e">w</span>,<span style="color:#e6db74">&#34;Hello,world!\n&#34;</span>)
}

<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandlerFunc</span>(<span style="color:#e6db74">&#34;/hello&#34;</span>,<span style="color:#a6e22e">helloHandler</span>)
<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>,<span style="color:#66d9ef">nil</span>))
</code></pre></div><h2 id="func-listenandservetls">func ListenAndServeTLS</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ListenAndServeTLS</span>(<span style="color:#a6e22e">addr</span>, <span style="color:#a6e22e">certFile</span>, <span style="color:#a6e22e">keyFile</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">handler</span> <span style="color:#a6e22e">Handler</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p><code>ListenAndServeTLS</code>的行为与<code>ListenAndServe</code>相同，不同之处在于它需要<code>HTTPS</code>连接。此外，必须提供包含服务器证书和匹配私钥的文件。如果证书是由证书颁发机构签名的，则<code>certFile</code>应该是服务器证书，任何中间件和CA证书的串联。</p>
<h3 id="listenandservetls-example">ListenAndServeTLS Example</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandlerFunc</span>(<span style="color:#e6db74">&#34;/&#34;</span>,<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>){
    <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">WriteString</span>(<span style="color:#a6e22e">w</span>,<span style="color:#e6db74">&#34;Hello,TLS!\n&#34;</span>)
})

<span style="color:#75715e">// One can use generate_cert.go in crypto/tls to generate cert.pem and key.pem
</span><span style="color:#75715e"></span><span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;About to listen on 8443. Go to https://127.0,0.1:8443/&#34;</span>)
<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServeTLS</span>(<span style="color:#e6db74">&#34;:8443&#34;</span>,<span style="color:#e6db74">&#34;cert.pem&#34;</span>,<span style="color:#e6db74">&#34;key.pem&#34;</span>,<span style="color:#66d9ef">nil</span>)
<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
</code></pre></div><h2 id="func-maxbytesreader">func MaxBytesReader</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">MaxBytesReader</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">ReadCloser</span>, <span style="color:#a6e22e">n</span> <span style="color:#66d9ef">int64</span>) <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">ReadCloser</span>
</code></pre></div><p><code>MaxBytesReader</code>与<code>io.LimitReader</code>相似，但旨在限制传入请求体的大小。与<code>io.LimitReader</code>相比，<code>MaxBytesReader</code>的结果为<code>ReadCloser</code>，对于超出限制的Read返回非EOF错误，并在调用其Close方法时关闭底层reader。</p>
<p><code>MaxBytesReader</code>可以防止客户端意外或恶意发送大请求并浪费服务器资源。</p>
<h2 id="func-notfound">func NotFound</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NotFound</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>)
</code></pre></div><p><code>NotFound</code>回复请求，并显示HTTP 404 not found错误。</p>
<h2 id="func-parsehttpversion">func ParseHTTPVersion</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ParseHTTPVersion</span>(<span style="color:#a6e22e">vers</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">major</span>, <span style="color:#a6e22e">minor</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">ok</span> <span style="color:#66d9ef">bool</span>)
</code></pre></div><p><code>ParseHTTPVersion</code>解析HTTP版本字符串。 <code>&quot;HTTP/1.0&quot;</code>返回<code>(1,0,true)</code>。</p>
<h2 id="func-parsetime">func ParseTime</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ParseTime</span>(<span style="color:#a6e22e">text</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">t</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
</code></pre></div><p><code>ParseTime</code>解析时间header（例如<code>Date: header</code>），尝试使用<code>HTTP/1.1</code>允许的三种格式：<code>TimeFormat</code>，<code>time.RFC850</code>和<code>time.ANSIC</code>。</p>
<h2 id="func-proxyfromenvironment">func ProxyFromEnvironment</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ProxyFromEnvironment</span>(<span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">URL</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p><code>ProxyFromEnvironment</code>返回用于给定请求的代理的URL，如环境变量<code>HTTP_PROXY</code>，<code>HTTPS_PROXY</code>和<code>NO_PROXY</code>（或其小写版本）所指示。<strong>对于HTTPS请求，HTTPS_PROXY优先于HTTP_PROXY</strong>。</p>
<p>环境值可以是完整的URL或<code>&quot;host[:port]&quot;</code>，在这种情况下，假定使用&quot;http&quot;协议。如果值的格式不同，则返回错误。</p>
<p>如果环境中未定义任何代理，则返回nil URL和nil错误，或者不应将代理用于这样的请求（如<code>NO_PROXY</code>所定义）。</p>
<p>在特殊情况下，如果<code>req.URL.Host</code>为<code>&quot;localhost&quot;</code>（有或没有端口号），则将返回nil URL和nil错误。</p>
<h2 id="func-proxyurl">func ProxyURL</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ProxyURL</span>(<span style="color:#a6e22e">fixedURL</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">URL</span>) <span style="color:#66d9ef">func</span>(<span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">URL</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p><code>ProxyURL</code>返回一个代理函数（在Transport中使用），该函数始终返回相同URL。</p>
<h2 id="func-redirect">func Redirect</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Redirect</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>, <span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">code</span> <span style="color:#66d9ef">int</span>)
</code></pre></div><p><code>Redirect</code>通过重定向到URL来响应请求，URL可能是相对于请求路径的路径。</p>
<p>返回的状态码应在3xx范围内，通常为<code>StatusMovedPermanently</code>（301），<code>StatusFound</code>（302）或<code>StatusSeeOther</code>(303）。</p>
<p>如果尚未设置<code>Content-Type</code> Header，<code>Redirect</code>会将其设置为 <code>&quot;text/html; charset=utf-8&quot;</code> 并编写一个小的HTML。将<code>Content-Type</code> Header设置为任何值（包括nil）将禁用该行为。</p>
<h2 id="func-serve">func Serve</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Serve</span>(<span style="color:#a6e22e">l</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Listener</span>, <span style="color:#a6e22e">handler</span> <span style="color:#a6e22e">Handler</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p><code>Serve</code>接受侦听器<code>l</code>上传入的HTTP连接，从而为每个侦听器创建一个新的服务<code>goroutine</code>。服务<code>goroutine</code>读取请求，然后调用handler以回复请求。该handler通常为nil，在这种情况下，将使用<code>DefaultServeMux</code>。</p>
<p>仅当侦听器返回<code>*tls.Conn</code>连接并且在<code>TLSConfig.NextProtos</code>中将它们配置为<code>&quot;h2&quot;</code>时，才启用<code>HTTP/2</code>支持。<code>Serve</code>始终返回非nil错误。</p>
<h2 id="func-servecontent">func ServeContent</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ServeContent</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>, <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">modtime</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>, <span style="color:#a6e22e">content</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">ReadSeeker</span>)
</code></pre></div><p><code>ServeContent</code>使用提供的<code>ReadSeeker</code>中的内容回复请求。<code>ServeContent</code>优于<code>io.Copy</code>的主要好处是它可以正确处理<code>Range</code>请求，设置<code>MIME</code>类型并处理<code>If-Match</code>，<code>If-Unmodified-Since</code>，<code>If-None-Match</code>，<code>If-Modified-Since</code>和<code>If-Range</code> 请求。</p>
<p>如果未设置响应的<code>Content-Type</code>Header，则<code>ServeContent</code>首先尝试从名称的文件扩展名中推断出类型，如果失败，则退回到读取内容的第一块并将其传递给<code>DetectContentType</code>。否则该名称未使用。特别是它可以为空，并且永远不会在响应中发送。</p>
<p>如果<code>modtime</code>不是零时间或Unix时期，则<code>ServeContent</code>会将其包含在响应的<code>Last-Modified</code> Header中。如果请求中包含<code>If-Modified-Since</code> Header，则<code>ServeContent</code>使用<code>modtime</code>来决定是否需要发送内容。</p>
<p>内容的Seek方法必须起作用：ServeContent使用对内容结尾的查找来确定其大小。</p>
<p>如果调用方设置了按照<a href="http://tools.ietf.org/html/rfc7232#section-2.3">RFC 7232第2.3节</a>格式化的w的ETagHeader，则ServeContent使用它来处理使用If-Match，If-None-Match或If-Range的请求。</p>
<p>请注意，<code>*os.File</code>实现了<code>io.ReadSeeker</code>接口。</p>
<h2 id="func-servefile">func ServeFile</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ServeFile</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>, <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>)
</code></pre></div><p>ServeFile使用命名文件或目录的内容答复请求。</p>
<p>如果提供的文件或目录名称是相对路径，则会相对于当前目录进行解释，并且可能会升至父目录。 如果提供的名称是根据用户输入构造的，则应在调用ServeFile之前对其进行清理。</p>
<p>作为预防措施，ServeFile将拒绝<code>r.URL.Path</code>包含“..”路径元素的请求； 这样可以防止调用者可能不安全地使用<code>filepath.Join</code>而不清理它，然后使用该<code>filepath.Join</code>结果作为name参数。</p>
<p>作为另一种特殊情况，ServeFile将<code>r.URL.Path</code>以“/index.html”结尾的任何请求重定向到同一路径，而没有最终的“index.html”。 为避免此类重定向，请修改路径或使用ServeContent。</p>
<p>除了这两种特殊情况外，ServeFile不使用<code>r.URL.Path</code>来选择要提供的文件或目录。 仅使用name参数中提供的文件或目录。</p>
<h2 id="func-servetls">func ServeTLS</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ServeTLS</span>(<span style="color:#a6e22e">l</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Listener</span>, <span style="color:#a6e22e">handler</span> <span style="color:#a6e22e">Handler</span>, <span style="color:#a6e22e">certFile</span>, <span style="color:#a6e22e">keyFile</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>ServeTLS在侦听器<code>l</code>上接受传入的HTTPS连接，从而为每个侦听器创建一个新的服务goroutine。 服务goroutine读取请求，然后调用handler以回复请求。</p>
<p>该handler通常为nil，在这种情况下，将使用DefaultServeMux。</p>
<p>此外，必须提供包含服务器证书和匹配私钥的文件。 如果证书是由证书颁发机构签名的，则certFile应该是服务器证书，任何中间件和CA证书的串联。</p>
<p>ServeTLS始终返回非nil错误。</p>
<h2 id="func-setcookie">func SetCookie</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">SetCookie</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">cookie</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Cookie</span>)
</code></pre></div><p>SetCookie将Set-Cookie Header添加到提供的ResponseWriter的Header中。提供的cookie必须具有有效的名称。无效的cookie可能会被静默删除。</p>
<h2 id="func-statustext">func StatusText</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">StatusText</span>(<span style="color:#a6e22e">code</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">string</span>
</code></pre></div><p>StatusText返回HTTP状态代码的文本。如果状态码未知，它将返回空字符串。</p>
<h2 id="type-client">type Client</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Client</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#75715e">// Transport 指定发出单个HTTP请求的机制。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果为nil，则使用DefaultTransport。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Transport</span> <span style="color:#a6e22e">RoundTripper</span>

    <span style="color:#75715e">// CheckRedirect指定用于处理重定向的策略。 如果CheckRedirect不为nil，则客户端将在执行 HTTP重定向之前调用它。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 参数req和via是即将到来的请求和已发出的请求，先到达的先发出。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果CheckRedirect返回错误，则客户端的Get方法将返回先前的Response（关闭该响应体）和CheckRedirect的错误（包装在url.Error中），而不是发出Request请求。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 作为一种特殊情况，如果CheckRedirect返回ErrUseLastResponse，则返回最近的响应，且其响应体未关闭，并返回nil错误。 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果CheckRedirect为nil，则客户端使用其默认策略，该策略将在连续10个请求后停止。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">CheckRedirect</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>, <span style="color:#a6e22e">via</span> []<span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#66d9ef">error</span>

    <span style="color:#75715e">// Jar 指定cookie jar。Jar用于将相关cookie插入每个出站请求，并使用每个入站Response的cookie值进行更新。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 客户端遵循的每个重定向都会咨询Jar。 如果Jar为nil，则仅当在Request上显式设置cookie时，才发送cookie。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Jar</span> <span style="color:#a6e22e">CookieJar</span>

    <span style="color:#75715e">// Timeout 指定此客户端发出的请求的时间限制。 超时包括连接时间，任何重定向和读取响应Body。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 在Get，Head，Post或Do返回之后，计时器保持运行状态，并且将中断Response.Body的读取。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Timeout为零表示没有超时。 客户端取消对基础传输的请求，就像请求的context结束一样。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 为了兼容性，如果找到，客户端还将在Transport上使用已经弃用的CancelRequest方法。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 新的RoundTripper实现应使用请求的context进行取消，而不是实现CancelRequest。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Timeout</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>
}
</code></pre></div><p>Client是HTTP客户端。它的零值（DefaultClient）是使用DefaultTransport的可用客户端。</p>
<p>客户端的传输通常具有内部状态（缓存的TCP连接），因此应重用客户端，而不是根据需要创建客户端。客户端可以安全地被多个goroutine并发使用。</p>
<p>客户端比RoundTripper（例如Transport）更高级别，并且还处理HTTP详细信息，例如cookie和重定向。</p>
<p>执行重定向时，客户端将转发在初始请求上设置的所有Header，但以下情况除外：</p>
<ul>
<li>将诸如“Authorization”，“ WWW-Authenticate”和“ Cookie”之类的敏感Header转发到不受信任的目标时。当重定向到与子域不匹配或与初始域不完全匹配的域时，将忽略这些Header。例如，从“ foo.com”重定向到“ foo.com”或“ sub.foo.com”将转发敏感Header，但重定向到“ bar.com”则不会。</li>
<li>用非零值的Cookie Jar转发“ Cookie”Header时。由于每个重定向可能会更改Cookie Jar的状态，因此重定向可能会更改初始请求中设置的Cookie。当转发“ Cookie”Header时，任何突变的cookie都将被省略，并期望Jar将插入具有更新值的那些突变的cookie（假设原点匹配）。如果Jar为零，则将转发原始cookie，而不进行任何更改。</li>
</ul>
<h2 id="func-client-closeidleconnections">func (*Client) CloseIdleConnections</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Client</span>) <span style="color:#a6e22e">CloseIdleConnections</span>()
</code></pre></div><p>CloseIdleConnections关闭其Transport上先前请求建的现在处于“keep-alive”状态的所有连接。 它不会中断当前正在使用的任何连接。</p>
<p>如果客户端的Transport没有CloseIdleConnections方法，则此方法不执行任何操作。</p>
<h2 id="func-client-do">func (*Client) Do</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Client</span>) <span style="color:#a6e22e">Do</span>(<span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>Do 按照客户端上配置的策略（例如重定向，Cookie，身份验证）发送HTTP请求并返回HTTP响应。</p>
<p>如果是由客户端策略（例如CheckRedirect）或无法连接HTTP（例如网络连接问题）引起的，则返回错误。非2xx状态代码不会引起错误。</p>
<p>如果返回的错误为nil，则响应将包含一个非nil的响应体，用户希望将其关闭。如果未同时将Body读入EOF并关闭，则客户端的底层RoundTripper（通常是Transport）可能无法将与服务器的持久TCP连接重新用于后续的“keep-alive”请求。</p>
<p>请求体（如果非nil）将被底层Transport关闭，即使发生错误也是如此。</p>
<p>出错时，任何响应都可以忽略。仅当CheckRedirect失败并且返回的<code>Response.Body</code>已关闭时，才会出现具有非nil错误的非nil响应。</p>
<p>通常，将使用Get，Post或PostForm代替Do。</p>
<p>如果服务器回复重定向，则客户端首先使用CheckRedirect函数来确定是否应遵循重定向。如果允许，则301、302或303重定向会导致后续请求使用HTTP方法GET（如果原始请求为HEAD，则为HEAD），而没有请求体。如果定义了<code>Request.GetBody</code>函数，则307或308重定向将保留原始的HTTP方法和Body。 NewRequest函数自动为常见的标准库Body类型设置GetBody。</p>
<p>返回的任何错误均为<code>*url.Error</code>类型。如果请求超时或被取消，则<code>url.Error</code>值的Timeout方法将报告true。</p>
<h2 id="func-client-get">func (*Client) Get</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Client</span>) <span style="color:#a6e22e">Get</span>(<span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">resp</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
</code></pre></div><p>Get将GET发送到指定的URL。如果响应是以下重定向代码之一，则Get在调用客户端的CheckRedirect函数后执行重定向：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ae81ff">301</span> (<span style="color:#a6e22e">Moved</span> <span style="color:#a6e22e">Permanently</span>)
<span style="color:#ae81ff">302</span> (<span style="color:#a6e22e">Found</span>)
<span style="color:#ae81ff">303</span> (<span style="color:#a6e22e">See</span> <span style="color:#a6e22e">Other</span>)
<span style="color:#ae81ff">307</span> (<span style="color:#a6e22e">Temporary</span> <span style="color:#a6e22e">Redirect</span>)
<span style="color:#ae81ff">308</span> (<span style="color:#a6e22e">Permanent</span> <span style="color:#a6e22e">Redirect</span>)
</code></pre></div><p>如果客户端的CheckRedirect函数失败或存在HTTP协议错误，则返回错误。 非2xx响应不会导致错误。 返回的任何错误均为<code>*url.Error</code>类型。 如果请求超时或被取消，则<code>url.Error</code>值的Timeout方法将报告true。</p>
<p>当err为nil时，resp始终包含非nil的 <code>resp.Body</code> 。调用者完成读取后，应关闭<code>resp.Body</code>。</p>
<p>要使用自定义Header发出请求，请使用NewRequest和<code>Client.Do</code>。</p>
<h2 id="func-client-head">func (*Client) Head</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Client</span>) <span style="color:#a6e22e">Head</span>(<span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">resp</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
</code></pre></div><p>Head向指定的URL发出HEAD。如果响应是以下重定向代码之一，则Head在调用客户端的CheckRedirect函数后执行重定向：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ae81ff">301</span> (<span style="color:#a6e22e">Moved</span> <span style="color:#a6e22e">Permanently</span>)
<span style="color:#ae81ff">302</span> (<span style="color:#a6e22e">Found</span>)
<span style="color:#ae81ff">303</span> (<span style="color:#a6e22e">See</span> <span style="color:#a6e22e">Other</span>)
<span style="color:#ae81ff">307</span> (<span style="color:#a6e22e">Temporary</span> <span style="color:#a6e22e">Redirect</span>)
<span style="color:#ae81ff">308</span> (<span style="color:#a6e22e">Permanent</span> <span style="color:#a6e22e">Redirect</span>)
</code></pre></div><h2 id="func-client-post">func (*Client) Post</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Client</span>) <span style="color:#a6e22e">Post</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">contentType</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">body</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Reader</span>) (<span style="color:#a6e22e">resp</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
</code></pre></div><p>Post发布POST到指定的URL。 调用者完成读取后，应关闭<code>resp.Body</code>。 如果提供的body是<code>io.Closer</code>，则在请求后将其关闭。 若要设置自定义Header，请使用NewRequest和<code>Client.Do</code>。 有关如何处理重定向的详细信息，请参阅<code>Client.Do</code>方法文档。</p>
<h2 id="func-client-postform">func (*Client) PostForm</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Client</span>) <span style="color:#a6e22e">PostForm</span>(<span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">data</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Values</span>) (<span style="color:#a6e22e">resp</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
</code></pre></div><p>PostForm向指定的URL发出POST，并将数据的键和值URL编码为请求体。 Content-TypeHeader设置为<code>application/x-www-form-urlencoded</code>。 若要设置其他Header，请使用NewRequest和<code>Client.Do</code>。 当err为nil时，resp始终包含非nil <code>resp.Body</code>，调用者完成读取后，应关闭<code>resp.Body</code>。 有关如何处理重定向的详细信息，请参阅<code>Client.Do</code>方法文档。</p>
<h2 id="type-closenotifier">type CloseNotifier</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">CloseNotifier</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#75715e">// 当客户端连接断开时，CloseNotify返回一个通道，该通道最多接收单个值（true）。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 在完全读取Request.Body之前，CloseNotify可能会等待通知。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// handler返回后，不能保证该通道会收到一个值。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果协议是HTTP/1.1，并且在使用HTTP/1.1管道处理幂等请求（例如GET）时调用了CloseNotify，则后续管道请求的到来可能会导致在返回的通道上发送值。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 实际上，HTTP/1.1管道未在浏览器中启用，并且很不常见。 如果这是一个问题，请使用HTTP/2或仅对诸如POST之类的方法使用CloseNotify。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">CloseNotify</span>() <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">bool</span>
}
</code></pre></div><h2 id="type-connstate">type ConnState</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">ConnState</span> <span style="color:#66d9ef">int</span>
</code></pre></div><p>ConnState表示客户端与服务器的连接状态。由可选的<code>Server.ConnState</code>挂钩使用。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> (
    <span style="color:#75715e">// StateNew表示一个新连接，该连接应立即发送请求。 连接从此状态开始，然后过渡到StateActive或StateClosed。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StateNew</span> <span style="color:#a6e22e">ConnState</span> = <span style="color:#66d9ef">iota</span>

    <span style="color:#75715e">// StateActive表示已读取一个或多个请求字节的连接。 StateActive的Server.ConnState钩子在请求进入handler之前触发，直到请求被处理后才再次触发。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 处理请求后，状态将转换为StateClosed，StateHijacked或StateIdle。 对于HTTP / 2，StateActive在从零到一个活动请求的转换上触发，并且仅在所有活动请求完成后才转换。 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这意味着ConnState不能用于执行每个请求的预处理工作； ConnState仅记录连接的整体状态。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StateActive</span>

    <span style="color:#75715e">// StateIdle表示已完成处理请求并处于keep-alive状态的连接，正在等待新请求。 连接从StateIdle转换为StateActive或StateClosed。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StateIdle</span>

    <span style="color:#75715e">// StateHijacked 表示被劫持的连接， 这是状态的终态，它不会过渡到StateClosed。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StateHijacked</span>

    <span style="color:#75715e">// StateClosed表示已关闭的连接。 这是状态的终态， 被劫持的连接不会过渡到StateClosed。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StateClosed</span>
)
</code></pre></div><h2 id="func-connstate-string">func (ConnState) String</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">ConnState</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span>
</code></pre></div><h2 id="type-cookie">type Cookie</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Cookie</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Name</span>  <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">Value</span> <span style="color:#66d9ef">string</span>

    <span style="color:#a6e22e">Path</span>       <span style="color:#66d9ef">string</span>    <span style="color:#75715e">// optional
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Domain</span>     <span style="color:#66d9ef">string</span>    <span style="color:#75715e">// optional
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Expires</span>    <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span> <span style="color:#75715e">// optional
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">RawExpires</span> <span style="color:#66d9ef">string</span>    <span style="color:#75715e">// for reading cookies only
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// MaxAge=0 means no &#39;Max-Age&#39; attribute specified.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// MaxAge&lt;0 means delete cookie now, equivalently &#39;Max-Age: 0&#39;
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// MaxAge&gt;0 means Max-Age attribute present and given in seconds
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">MaxAge</span>   <span style="color:#66d9ef">int</span>
    <span style="color:#a6e22e">Secure</span>   <span style="color:#66d9ef">bool</span>
    <span style="color:#a6e22e">HttpOnly</span> <span style="color:#66d9ef">bool</span>
    <span style="color:#a6e22e">SameSite</span> <span style="color:#a6e22e">SameSite</span>
    <span style="color:#a6e22e">Raw</span>      <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">Unparsed</span> []<span style="color:#66d9ef">string</span> <span style="color:#75715e">// Raw text of unparsed attribute-value pairs
</span><span style="color:#75715e"></span>}
</code></pre></div><p>Cookie代表在HTTP响应的Set-CookieHeader或HTTP请求的CookieHeader中发送的HTTP Cookie，更多详情看<a href="https://tools.ietf.org/html/rfc6265">这里</a>。</p>
<h2 id="func-cookie-string">func (*Cookie) String</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Cookie</span>) <span style="color:#a6e22e">String</span>() <span style="color:#66d9ef">string</span> 
</code></pre></div><p>String返回用于Cookie头（如果仅设置了Name和Value）或Set-Cookie响应头（如果设置了其他字段）的cookie的序列化。如果<code>c</code>为nil或<code>c.Name</code>无效，则返回空字符串。</p>
<h2 id="type-cookiejar">type CookieJar</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">CookieJar</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#75715e">// SetCookies在给定URL的回复中处理cookie的接收。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 它可能会或可能不会选择保存cookie，具体取决于jar的策略和实现。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">SetCookies</span>(<span style="color:#a6e22e">u</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">URL</span>, <span style="color:#a6e22e">cookies</span> []<span style="color:#f92672">*</span><span style="color:#a6e22e">Cookie</span>)

    <span style="color:#75715e">// Cookies返回cookie，以发送对给定URL的请求。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 具体实现取决于标准的cookie使用限制，例如RFC 6265。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Cookies</span>(<span style="color:#a6e22e">u</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">URL</span>) []<span style="color:#f92672">*</span><span style="color:#a6e22e">Cookie</span>
}
</code></pre></div><p>CookieJar管理HTTP请求中cookie的存储和使用。 CookieJar的实现必须安全，可以被多个goroutine并发使用。 <code>net/http/cookiejar</code>软件包提供了CookieJar实现。</p>
<h2 id="type-dir">type Dir</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Dir</span> <span style="color:#66d9ef">string</span>
</code></pre></div><p>Dir使用限于特定目录树的原生文件系统来实现FileSystem。</p>
<p>尽管<code>FileSystem.Open</code>方法采用<code>'/'</code>分隔的路径，但Dir的字符串值是原生文件系统上的文件名，而不是URL，因此它由<code>filepath.Separator</code>分隔，不一定是<code>'/'</code>。</p>
<p>请注意，Dir将允许以句点开头（隐藏文件）的文件和目录访问，这可能会公开敏感目录（如<code>.git</code>目录）或敏感文件（如<code>.htpasswd</code>）。 要排除隐藏文件，请从服务器中删除文件/目录或创建自定义FileSystem实现。</p>
<p>空目录将被视为<code>“.”</code>。</p>
<h2 id="func-dir-open">func (Dir) Open</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">d</span> <span style="color:#a6e22e">Dir</span>) <span style="color:#a6e22e">Open</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">File</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>Open使用<code>os.Open</code>实现FileSystem，打开文件以读取root以及相对于目录d的文件。</p>
<h2 id="type-file">type File</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">File</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Closer</span>
    <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Reader</span>
    <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Seeker</span>
    <span style="color:#a6e22e">Readdir</span>(<span style="color:#a6e22e">count</span> <span style="color:#66d9ef">int</span>) ([]<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">FileInfo</span>, <span style="color:#66d9ef">error</span>)
    <span style="color:#a6e22e">Stat</span>() (<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">FileInfo</span>, <span style="color:#66d9ef">error</span>)
}
</code></pre></div><p>File由FileSystem的Open方法返回，并且可以由FileServer实现提供服务。</p>
<p>这些方法的行为应与<code>*os.File</code>上的行为相同。</p>
<h2 id="type-filesystem">type FileSystem</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">FileSystem</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#a6e22e">Open</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">File</span>, <span style="color:#66d9ef">error</span>)
}
</code></pre></div><p>FileSystem实现对命名文件集合的访问。无论主机操作系统的约定如何，文件路径中的元素都用斜杠（<code>'/'</code>，U+002F）字符分隔。</p>
<h2 id="type-flusher">type Flusher</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Flusher</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#75715e">// Flush 刷新会将所有缓冲的数据发送到客户端。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Flush</span>()
}
</code></pre></div><p>Flusher接口由ResponseWriters实现，它允许HTTPhandler将缓冲的数据刷新到客户端。</p>
<p>默认的<code>HTTP/1.x</code>和<code>HTTP/2 ResponseWriter</code>实现支持Flusher，但ResponseWriter包装器可能不支持。 handler应始终在运行时测试此功能。</p>
<p>请注意，即使对于支持Flush的ResponseWriters，如果客户端通过HTTP代理连接，在响应完成之前，缓冲的数据也可能无法到达客户端。</p>
<h2 id="type-handler">type Handler</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Handler</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#a6e22e">ServeHTTP</span>(<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>)
}
</code></pre></div><p>Handler响应HTTP请求。</p>
<p>ServeHTTP应将响应Header和数据写入ResponseWriter，然后返回。返回信号表明请求已完成；在ServeHTTP调用完成后或与之同时使用ResponseWriter或从<code>Request.Body</code>中读取是无效的。</p>
<p>根据HTTP客户端软件，HTTP协议版本以及客户端和Go服务器之间的任何中介，可能无法在写入ResponseWriter之后从<code>Request.Body</code>中读取。谨慎的handler应先读取<code>Request.Body</code>，然后再进行回复。</p>
<p>除读取Body外，handler不应修改提供的请求。</p>
<p>如果出现ServeHTTP出现运行时恐慌（painc），则服务端（ServeHTTP的调用方）将假定panic的影响与处于活跃状态的请求无关。它将会恢复panic，将堆栈跟踪记录到服务器错误日志中，然后关闭网络连接或发送<code>HTTP/2 RST_STREAM</code>，具体取决于HTTP协议。要中止handler，以便客户端看到中断的响应，而服务器不会记录错误，那么panic应该带有ErrAbortHandler值。</p>
<h2 id="func-fileserver">func FileServer</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">FileServer</span>(<span style="color:#a6e22e">root</span> <span style="color:#a6e22e">FileSystem</span>) <span style="color:#a6e22e">Handler</span>
</code></pre></div><p>FileServer返回一个handler，该handler以根目录为根文件系统内容为HTTP请求提供服务。</p>
<p>要使用操作系统的文件系统实现，请使用<code>http.Dir</code>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Handle</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">FileServer</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Dir</span>(<span style="color:#e6db74">&#34;/tmp&#34;</span>)))
</code></pre></div><p>作为一种特殊情况，返回的文件服务器会将以<code>“/index.html”</code>结尾的所有请求重定向到同一路径，而没有最终的<code>“index.html”</code>。</p>
<h3 id="example">Example</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// 简单的静态Web服务器
</span><span style="color:#75715e"></span><span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>, <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">FileServer</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Dir</span>(<span style="color:#e6db74">&#34;/usr/share/doc&#34;</span>))))
</code></pre></div><h3 id="exampledotfilehiding">Example(DotFileHiding)</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">http_test</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;log&#34;</span>
    <span style="color:#e6db74">&#34;net/http&#34;</span>
    <span style="color:#e6db74">&#34;os&#34;</span>
    <span style="color:#e6db74">&#34;strings&#34;</span>
)

<span style="color:#75715e">// containsDotFile报告name是否包含以句点开头的path元素。
</span><span style="color:#75715e">// 假定name由正斜杠分隔，由http.FileSystem接口保证。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">containsDotFile</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">bool</span> {
    <span style="color:#a6e22e">parts</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Split</span>(<span style="color:#a6e22e">name</span>, <span style="color:#e6db74">&#34;/&#34;</span>)
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">part</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">parts</span> {
        <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">HasPrefix</span>(<span style="color:#a6e22e">part</span>, <span style="color:#e6db74">&#34;.&#34;</span>) {
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
        }
    }
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
}

<span style="color:#75715e">// dotFileHidingFile是dotFileHidingFileSystem中的http.File使用。
</span><span style="color:#75715e">// 它用于包装http.File的Readdir方法，以便我们可以从其输出中删除以句点开头的文件和目录。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">dotFileHidingFile</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">File</span>
}

<span style="color:#75715e">// Readdir是嵌入式File的Readdir方法的包装，可过滤掉名称中以句点开头的所有文件。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">f</span> <span style="color:#a6e22e">dotFileHidingFile</span>) <span style="color:#a6e22e">Readdir</span>(<span style="color:#a6e22e">n</span> <span style="color:#66d9ef">int</span>) (<span style="color:#a6e22e">fis</span> []<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">FileInfo</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>) {
    <span style="color:#a6e22e">files</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">File</span>.<span style="color:#a6e22e">Readdir</span>(<span style="color:#a6e22e">n</span>)
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">file</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">files</span> { <span style="color:#75715e">// 过滤点文件
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">HasPrefix</span>(<span style="color:#a6e22e">file</span>.<span style="color:#a6e22e">Name</span>(), <span style="color:#e6db74">&#34;.&#34;</span>) {
            <span style="color:#a6e22e">fis</span> = append(<span style="color:#a6e22e">fis</span>, <span style="color:#a6e22e">file</span>)
        }
    }
    <span style="color:#66d9ef">return</span>
}

<span style="color:#75715e">// dotFileHidingFileSystem是一个http.FileSystem，可隐藏隐藏的“点文件”，使其不再提供服务。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">dotFileHidingFileSystem</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">FileSystem</span>
}

<span style="color:#75715e">// Open是嵌入式FileSystem的Open方法的包装，
</span><span style="color:#75715e">// 当name具有名称以其路径开头的文件或目录时，它将包装403权限错误。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">fs</span> <span style="color:#a6e22e">dotFileHidingFileSystem</span>) <span style="color:#a6e22e">Open</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">File</span>, <span style="color:#66d9ef">error</span>) {
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">containsDotFile</span>(<span style="color:#a6e22e">name</span>) { <span style="color:#75715e">// 如果是点文件, 返回 403
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">ErrPermission</span>
    }

    <span style="color:#a6e22e">file</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">FileSystem</span>.<span style="color:#a6e22e">Open</span>(<span style="color:#a6e22e">name</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">err</span>
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">dotFileHidingFile</span>{<span style="color:#a6e22e">file</span>}, <span style="color:#a6e22e">err</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ExampleFileServer_dotFileHiding</span>() {
    <span style="color:#a6e22e">fs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">dotFileHidingFileSystem</span>{<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Dir</span>(<span style="color:#e6db74">&#34;.&#34;</span>)}
    <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Handle</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">FileServer</span>(<span style="color:#a6e22e">fs</span>))
    <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>, <span style="color:#66d9ef">nil</span>))
}
</code></pre></div><h2 id="func-notfoundhandler">func NotFoundHandler</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NotFoundHandler</span>() <span style="color:#a6e22e">Handler</span>
</code></pre></div><p>NotFoundHandler返回一个简单的handler，该handler以“404页面未找到”答复来回复每个请求。</p>
<h3 id="examplenotfoundhandler">Example（NotFoundHandler）</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">mux</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">NewServeMux</span>()

<span style="color:#75715e">// 创建示例handler以返回404
</span><span style="color:#75715e"></span><span style="color:#a6e22e">mux</span>.<span style="color:#a6e22e">Handle</span>(<span style="color:#e6db74">&#34;/resources&#34;</span>, <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">NotFoundHandler</span>())

<span style="color:#75715e">// 创建示例handler以返回200
</span><span style="color:#75715e"></span><span style="color:#a6e22e">mux</span>.<span style="color:#a6e22e">Handle</span>(<span style="color:#e6db74">&#34;/resources/people/&#34;</span>, <span style="color:#a6e22e">newPeopleHandler</span>())

<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>, <span style="color:#a6e22e">mux</span>))
</code></pre></div><h2 id="func-redirecthandler">func RedirectHandler</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">RedirectHandler</span>(<span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">code</span> <span style="color:#66d9ef">int</span>) <span style="color:#a6e22e">Handler</span>
</code></pre></div><p>RedirectHandler返回一个handler，该handler使用给定的状态码将收到的每个请求重定向到给定的url。</p>
<p>提供的代码应在3xx范围内，通常为StatusMovedPermanently，StatusFound或StatusSeeOther。</p>
<h2 id="func-stripprefix">func StripPrefix</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">StripPrefix</span>(<span style="color:#a6e22e">prefix</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">h</span> <span style="color:#a6e22e">Handler</span>) <span style="color:#a6e22e">Handler</span>
</code></pre></div><p>StripPrefix通过从请求URL的路径中删除给定前缀并调用handler h，返回处理HTTP请求的handler。 StripPrefix通过回复HTTP 404 not found错误来处理不以前缀开头的路径的请求。</p>
<h3 id="examplestripprefix">Example（StripPrefix）</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// 要在备用URL路径（/tmpfiles/）下为磁盘（/tmp）上的目录提供服务，请在FileServer看到之前使用StripPrefix修改请求URL的路径：
</span><span style="color:#75715e"></span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Handle</span>(<span style="color:#e6db74">&#34;/tmpfiles/&#34;</span>, <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">StripPrefix</span>(<span style="color:#e6db74">&#34;/tmpfiles/&#34;</span>, <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">FileServer</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Dir</span>(<span style="color:#e6db74">&#34;/tmp&#34;</span>))))
</code></pre></div><h2 id="func-timeouthandler">func TimeoutHandler</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TimeoutHandler</span>(<span style="color:#a6e22e">h</span> <span style="color:#a6e22e">Handler</span>, <span style="color:#a6e22e">dt</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>, <span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>) <span style="color:#a6e22e">Handler</span>
</code></pre></div><p>TimeoutHandler返回一个在给定时间限制下运行h的Handler。</p>
<p>新的handler调用<code>h.ServeHTTP</code>来处理每个请求，但是如果调用的运行时间超过其时间限制，则该handler将以503 Service Unavailable错误和响应体中的给定消息作为响应。 （如果msg为空，则将发送适当的默认消息。）在这样的超时之后，用<code>h</code>对其ResponseWriter进行写操作将返回ErrHandlerTimeout。</p>
<p>TimeoutHandler支持Flusher和Pusher接口，但不支持Hijacker接口。</p>
<h2 id="type-handlerfunc">type HandlerFunc</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">HandlerFunc</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>)
</code></pre></div><p>HandlerFunc类型是一个适配器，允许将普通函数用作HTTP处理程序。如果<code>f</code>是具有适当签名的函数，则HandlerFunc(f) 是调用f的处理程序。</p>
<h2 id="func-handlerfunc-servehttp">func (HandlerFunc) ServeHTTP</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">f</span> <span style="color:#a6e22e">HandlerFunc</span>) <span style="color:#a6e22e">ServeHTTP</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>)
</code></pre></div><p>ServeHTTP 调用 f(w, r)。</p>
<h2 id="type-header">type Header</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Header</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>][]<span style="color:#66d9ef">string</span>
</code></pre></div><p>Header代表HTTPHeader中的键/值对。 key应采用CanonicalHeaderKey返回的规范形式。</p>
<h2 id="func-header-add">func (Header) Add</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#a6e22e">Header</span>) <span style="color:#a6e22e">Add</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">value</span> <span style="color:#66d9ef">string</span>)
</code></pre></div><p>Add将键值对添加到Header。它附加到与键关联的任何现有值。key不区分大小写；它由CanonicalHeaderKey规范化。</p>
<h2 id="func-header-clone">func (Header) Clone</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#a6e22e">Header</span>) <span style="color:#a6e22e">Clone</span>() <span style="color:#a6e22e">Header</span>
</code></pre></div><p>如果<code>h</code>为nil，则Clone返回<code>h</code>或nil的副本。</p>
<h2 id="func-header-del">func (Header) Del</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#a6e22e">Header</span>) <span style="color:#a6e22e">Del</span>(<span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>)
</code></pre></div><p>Del删除与键关联的值。key不区分大小写；它由CanonicalHeaderKey规范化。</p>
<h2 id="func-header-get">func (Header) Get</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#a6e22e">Header</span>) <span style="color:#a6e22e">Get</span>(<span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>
</code></pre></div><p>Get获取与给定键关联的第一个值。 如果没有与键关联的值，则Get返回<code>&quot;&quot;</code>。 不区分大小写； <code>textproto.CanonicalMIMEHeaderKey</code>用于规范化提供的key。 要访问键的多个值或使用非规范键，请直接访问map。</p>
<h2 id="func-header-set">func (Header) Set</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#a6e22e">Header</span>) <span style="color:#a6e22e">Set</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">value</span> <span style="color:#66d9ef">string</span>)
</code></pre></div><p>Set将与key关联的header条目设置为单个元素值。 它替换了与键关联的任何现有值。 key不区分大小写； 它由<code>textproto.CanonicalMIMEHeaderKey</code>规范化。 要使用非规范键，请直接分配给map。</p>
<h2 id="func-header-write">func (Header) Write</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#a6e22e">Header</span>) <span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Writer</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>Write以传输格式写header。</p>
<h2 id="func-header-writesubset">func (Header) WriteSubset</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#a6e22e">Header</span>) <span style="color:#a6e22e">WriteSubset</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Writer</span>, <span style="color:#a6e22e">exclude</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">bool</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>WriteSubset以传输格式写入header。如果exclude不为nil，则不会写入exclude [key] == true的键。</p>
<h2 id="type-hijacker">type Hijacker</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Hijacker</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#75715e">// Hijack使调用者可以接管连接。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 调用Hijack之后，HTTP服务器库将不会对该连接执行任何其他操作。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 管理和关闭连接成为调用者的责任。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 根据服务器的配置，返回的net.Conn可能已设置了读取或写入的期限。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 调用者有责任根据需要设置或清除这些截止时间。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 返回的bufio.Reader可能包含来自客户端的未处理的缓冲数据。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 调用Hijack之后，不得使用原始的Request.Body。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 原始请求的context仍然有效，并且直到该请求的ServeHTTP方法返回后才被取消。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Hijack</span>() (<span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Conn</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">bufio</span>.<span style="color:#a6e22e">ReadWriter</span>, <span style="color:#66d9ef">error</span>)
}
</code></pre></div><p>Hijacker接口是由ResponseWriters实现的，它允许HTTP hander接管连接。</p>
<p><code>HTTP/1.x</code>连接的默认ResponseWriter支持Hijacker，但<code>HTTP/2</code>连接有意设置为不支持。 ResponseWriter包装器也可能不支持Hijacker。 handler应始终在运行时测试此功能。</p>
<h3 id="examplehijacker">Example（Hijacker）</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/hijack&#34;</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
    <span style="color:#a6e22e">hj</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">w</span>.(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Hijacker</span>)
    <span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">ok</span> {
        <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Error</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;webserver doesn&#39;t support hijacking&#34;</span>, <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">StatusInternalServerError</span>)
        <span style="color:#66d9ef">return</span>
    }
    <span style="color:#a6e22e">conn</span>, <span style="color:#a6e22e">bufrw</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">hj</span>.<span style="color:#a6e22e">Hijack</span>()
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Error</span>(<span style="color:#a6e22e">w</span>, <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">Error</span>(), <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">StatusInternalServerError</span>)
        <span style="color:#66d9ef">return</span>
    }
    <span style="color:#75715e">// 不要忘记关闭连接
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">conn</span>.<span style="color:#a6e22e">Close</span>()
    <span style="color:#a6e22e">bufrw</span>.<span style="color:#a6e22e">WriteString</span>(<span style="color:#e6db74">&#34;Now we&#39;re speaking raw TCP. Say hi: &#34;</span>)
    <span style="color:#a6e22e">bufrw</span>.<span style="color:#a6e22e">Flush</span>()
    <span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">bufrw</span>.<span style="color:#a6e22e">ReadString</span>(<span style="color:#e6db74">&#39;\n&#39;</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;error reading string: %v&#34;</span>, <span style="color:#a6e22e">err</span>)
        <span style="color:#66d9ef">return</span>
    }
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Fprintf</span>(<span style="color:#a6e22e">bufrw</span>, <span style="color:#e6db74">&#34;You said: %q\nBye.\n&#34;</span>, <span style="color:#a6e22e">s</span>)
    <span style="color:#a6e22e">bufrw</span>.<span style="color:#a6e22e">Flush</span>()
})
</code></pre></div><h2 id="type-pushoptions">type PushOptions</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">PushOptions</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#75715e">// Method为承诺的请求指定HTTP方法。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果设置，则必须为“ GET”或“ HEAD”。空表示“ GET”。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Method</span> <span style="color:#66d9ef">string</span>

    <span style="color:#75715e">// Header指定其他承诺的请求Header。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这不能包括HTTP/2伪Header字段，例如“:path”和“:scheme”，它们会自动添加。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Header</span> <span style="color:#a6e22e">Header</span>
}
</code></pre></div><p>PushOptions描述了Pusher.Push的选项。</p>
<h2 id="type-pusher">type Pusher</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Pusher</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#75715e">// Push启动HTTP/2服务器来推送。 这将使用给定的目标和选项构造一个综合请求，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 将该请求序列化为PUSH_PROMISE帧，然后使用服务器的handler分派该请求。 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果opts为nil，则使用默认选项。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// target必须是绝对路径（例如“ /path”）或包含有效host和与父请求相同的scheme的绝对URL。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果目标是路径，它将继承父请求的scheme和host。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// HTTP/2规范不允许递归推送和交叉授权推送。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 推送可能会或可能不会检测到这些无效的推送； 但是，合格的客户端将检测并取消无效的推送。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 希望推送URL X的handler应在发送任何可能触发URL X请求的数据之前调用Push。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这避免了客户端在收到X的PUSH_PROMISE之前发出X请求的竞争。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Push将在单独的goroutine中运行，从而使到达顺序不确定。 调用者需要实现任何所需的同步。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 如果客户端禁用了Push或底层连接不支持Push，则Push返回ErrNotSupported。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Push</span>(<span style="color:#a6e22e">target</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">opts</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">PushOptions</span>) <span style="color:#66d9ef">error</span>
}
</code></pre></div><p>Pusher是由ResponseWriters实现的支持<code>HTTP/2</code>服务器推送的接口。有关更多背景信息，请参见<a href="https://tools.ietf.org/html/rfc7540#section-8.2">这里</a>。</p>
<h2 id="type-request">type Request</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Request</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#75715e">// Method指定HTTP方法（GET，POST，PUT等）。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于客户端请求，空字符串表示GET。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Go的HTTP客户端不支持使用CONNECT方法发送请求。 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 有关详细信息，请参见Transport文档。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Method</span> <span style="color:#66d9ef">string</span>

    <span style="color:#75715e">// URL指定要请求的URI（对于服务端请求）或要访问的URL（对于客户端请求）。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于服务端请求，将从存储在RequestURI中的请求行上提供的URI解析URL。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于大多数请求，Path和RawQuery以外的其他字段将为空。 （请参阅RFC 7230，第5.3节）
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 对于客户端请求，URL的host指定要连接的服务器，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 而请求的host字段则可选地指定要在HTTP请求中发送的hostHeader值。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">URL</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">URL</span>

    <span style="color:#75715e">// 传入服务器请求的协议版本。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于客户请求，将忽略这些字段。HTTP客户端代码始终使用HTTP/1.1或HTTP/2。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 有关详细信息，请参见Transport文档。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Proto</span>      <span style="color:#66d9ef">string</span> <span style="color:#75715e">// &#34;HTTP/1.0&#34;
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ProtoMajor</span> <span style="color:#66d9ef">int</span>    <span style="color:#75715e">// 1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ProtoMinor</span> <span style="color:#66d9ef">int</span>    <span style="color:#75715e">// 0
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Header包含服务端接收或客户端发送的请求Header字段。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 如果服务端收到带有Header行的请求：
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Host: example.com
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// accept-encoding: gzip, deflate
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Accept-Language: en-us
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// fOO: Bar
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// foo: two
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">//  Header = map[string][]string{
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//      &#34;Accept-Encoding&#34;: {&#34;gzip, deflate&#34;},
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//      &#34;Accept-Language&#34;: {&#34;en-us&#34;},
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//      &#34;Foo&#34;: {&#34;Bar&#34;, &#34;two&#34;},
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//  }
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 对于传入的请求，Host Header被提升为Request.Host字段并从 Header映射中删除。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// HTTP定义Header名称不区分大小写。 请求解析器通过使用CanonicalHeaderKey来实现此目的，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 使第一个字符以及连字符后的所有字符都变为大写，其余的都变为小写。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 对于客户端请求，某些header（例如Content-Length和Connection）会在需要时自动写入，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 并且Header中的值可能会被忽略。 请参阅文档中的Request.Write方法。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Header</span> <span style="color:#a6e22e">Header</span>

    <span style="color:#75715e">// Body 是请求体。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 对于客户端请求，nil body表示该请求没有请求体，例如GET请求。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// HTTP客户端的transport负责调用Close方法。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 对于服务端请求，请求体始终为non-nil，但在不存在请求体时将立即返回EOF。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 服务端将关闭请求体。 ServeHTTP handler不需要这么做。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Body</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">ReadCloser</span>

    <span style="color:#75715e">// GetBody定义了一个可选的func来返回Body的新副本。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 它用于当客户端请求重定向需要多次读取Body时。使用GetBody仍然需要设置Body。 
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 对于服务端请求，它是不使用的。
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">GetBody</span> <span style="color:#66d9ef">func</span>() (<span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">ReadCloser</span>, <span style="color:#66d9ef">error</span>)


    <span style="color:#75715e">// ContentLength记录关联内容的长度。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 值-1表示长度未知。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 值&gt;=0表示可以从请求体读取给定的字节数。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于客户请求，non-nil Body 的值为0也会被认为是未知。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ContentLength</span> <span style="color:#66d9ef">int64</span>

    <span style="color:#75715e">// TransferEncoding列出从最外层到最内层的传输编码。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 空列表表示“identity”编码。 通常可以忽略TransferEncoding。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 发送和接收请求时，将根据需要自动添加和删除分块编码。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">TransferEncoding</span> []<span style="color:#66d9ef">string</span>

    <span style="color:#75715e">// Close 指示是在回复此请求后（对于服务器）还是在发送此请求并读取其响应（对于客户端）之后关闭连接。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">//  对于服务端请求，HTTP服务器会自动处理此请求，并且处理程序不需要此字段。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于客户端请求，设置此字段可防止在相同主机的请求之间重复使用TCP连接，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 就像设置了Transport.DisableKeepAlives一样。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Close</span> <span style="color:#66d9ef">bool</span>

    <span style="color:#75715e">// 对于服务器请求，Host指定在其上搜索URL的host。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//  根据RFC 7230，第5.4节，这是“host”Header的值或URL本身中提供的主机名。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 它的形式可能是“ host:port”。 对于国际域名，Host可以采用Punycode或Unicode形式。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果需要，请使用golang.org/x/net/idna将其转换为两种格式。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 为了防止DNS重新绑定攻击，服务器handler应验证主机Header是否具有其认为自己具有权威性的值。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 随附的ServeMux支持注册到特定host名的模式，从而保护其注册的handler。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于客户端请求，host可以选择覆盖要发送的主机头。 如果为空，则Request.Write方法使用URL.Host的值。 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 主机可能包含国际域名。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Host</span> <span style="color:#66d9ef">string</span>

    <span style="color:#75715e">// 表单包含已解析的表单数据，包括URL字段的查询参数和PATCH，POST或PUT表单数据。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 该字段仅在调用ParseForm之后可用。 HTTP客户端会忽略Form，而使用Body。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Form</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Values</span>

    <span style="color:#75715e">// PostForm包含从PATCH，POST或PUT Body参数解析的表单数据。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 该字段仅在调用ParseForm之后可用。 HTTP客户端会忽略PostForm并改用Body。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">PostForm</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Values</span>

    <span style="color:#75715e">// MultipartForm是已解析的多部分表单，包括文件上传。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 仅在调用ParseMultipartForm之后，此字段才可用。 HTTP客户端会忽略MultipartForm并改用Body。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">MultipartForm</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">multipart</span>.<span style="color:#a6e22e">Form</span>

    <span style="color:#75715e">// Trailer指定在请求体之后发送的其他Header。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于服务器请求，Trailer map 最初仅包含 Trailer 键，其值为nil。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// （客户端声明它将稍后发送的Trailer。）handler从Body读取时，它不得引用 Trailer。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 从Body读取返回EOF后，Trailer可以再次读取，并且包含非null值（如果它们是由客户端发送的）。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//  对于客户端请求，必须将Trailer初始化为包含Trailer key 的 map，以便以后发送。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这些值可以为nil或它们的最终值。 ContentLength必须为0或-1，才能发送分块的请求。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 发送HTTP请求后，可以在读取请求体的同时更新map值。 一旦Body返回EOF，调用方就不得使Trailer发生改变。 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 很少有HTTP客户端，服务器或代理支持HTTP Trailer。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Trailer</span> <span style="color:#a6e22e">Header</span>

    <span style="color:#75715e">// RemoteAddr允许HTTP服务器和其他软件记录发送请求的网络地址，通常用于日志记录。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// ReadRequest不会填写此字段，并且没有定义的格式。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 在调用handler之前，此程序包中的HTTP服务器将RemoteAddr设置为“ IP:Port”地址。 HTTP客户端将忽略此字段。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">RemoteAddr</span> <span style="color:#66d9ef">string</span>

    <span style="color:#75715e">// RequestURI是客户端发送到服务器的请求行（RFC 7230，第3.1.1节）的未经修改的请求目标。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 通常应改用URL字段。 在HTTP客户端请求中设置此字段是错误的。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">RequestURI</span> <span style="color:#66d9ef">string</span>

    <span style="color:#75715e">// TLS允许HTTP服务器和其他软件记录有关在其上接收到请求的TLS连接的信息。ReadRequest不会填写此字段。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 此程序包中的HTTP服务器在调用handler之前为启用TLS的连接设置字段。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 否则，该字段将为零。 HTTP客户端会忽略此字段。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">TLS</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">tls</span>.<span style="color:#a6e22e">ConnectionState</span>

    <span style="color:#75715e">// Cancel是一个可选通道，当它关闭则表示客户端的请求应被视为已取消。 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 并非RoundTripper的所有实现都支持取消。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于服务器请求，此字段不适用。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 弃用：而是使用NewRequestWithContext设置请求的context。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果同时设置了请求的“cancel”字段和context，则不确定是否遵守“cancel”。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Cancel</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">struct</span>{}

    <span style="color:#75715e">// Response是导致创建此请求的重定向响应。仅在客户端重定向期间填充此字段。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Response</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>
}
</code></pre></div><p>Request表示服务器接收或客户端发送的HTTP请求。</p>
<p>客户端和服务器使用情况之间的字段语义略有不同。 除了以下字段上的注释外，请参阅<code>Request.Write</code>和RoundTripper的文档。</p>
<h2 id="func-newrequest">func NewRequest</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewRequest</span>(<span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">body</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Reader</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>NewRequest使用background context包装NewRequestWithContext。</p>
<h2 id="func-newrequestwithcontext">func NewRequestWithContext</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewRequestWithContext</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">method</span>, <span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">body</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Reader</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>给定Method，URL和可选Body，NewRequestWithContext返回一个新的请求。</p>
<p>如果提供的body同时也是<code>io.Closer</code>，则返回的<code>Request.Body</code>设置为body，并且将通过客户端方法Do，Post和PostForm以及<code>Transport.RoundTrip</code>关闭。</p>
<p>NewRequestWithContext返回适合与<code>Client.Do</code>或<code>Transport.RoundTrip</code>一起使用的请求。若要创建用于测试服务器handler的请求，请使用<code>net/http/httptest</code>程序包中的NewRequest函数，使用ReadRequest，或手动更新Request字段。对于传出的客户端请求，context控制请求的整个生命周期及其响应：获取连接，发送请求以及读取响应Header和Body。有关入站和出站请求字段之间的区别，请参见Request type的文档。</p>
<p>如果body的类型为<code>*bytes.Buffer</code>，<code>*bytes.Reader</code>或<code>*strings.Reader</code>，则返回的请求的ContentLength设置为其确切值（而不是-1），将填充GetBody（因此307和308重定向可以重播body），如果ContentLength为0，则将Body设置为NoBody。</p>
<h2 id="func-readrequest">func ReadRequest</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadRequest</span>(<span style="color:#a6e22e">b</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bufio</span>.<span style="color:#a6e22e">Reader</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>ReadRequest读取并解析来自<code>b</code>的传入请求。</p>
<p>ReadRequest是一个底层功能，仅应用于专业应用程序。大多数代码应使用服务器读取请求并通过Handler接口处理请求。 ReadRequest仅支持<code>HTTP/1.x</code>请求。 对于<code>HTTP/2</code>，请使用<code>golang.org/x/net/http2</code>。</p>
<h2 id="func-request-addcookie">func (*Request) AddCookie</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">AddCookie</span>(<span style="color:#a6e22e">c</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Cookie</span>)
</code></pre></div><p>AddCookie将cookie添加到请求中。根据RFC 6265第5.4节，AddCookie不会附加多个Cookie header字段。这意味着所有cookie（如果有的话）都写在同一行中，并用分号分隔。</p>
<h2 id="func-request-basicauth">func (*Request) BasicAuth</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">BasicAuth</span>() (<span style="color:#a6e22e">username</span>, <span style="color:#a6e22e">password</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">ok</span> <span style="color:#66d9ef">bool</span>)
</code></pre></div><p>如果请求使用HTTP基本认证，则BasicAuth返回请求的授权header中提供的用户名和密码。请参阅RFC 2617，第2节。</p>
<h2 id="func-request-clone">func (*Request) Clone</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">Clone</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>
</code></pre></div><p>Clone 返回<code>r</code>的深层副本，其context更改为ctx。 提供的ctx必须为非零。</p>
<p>对于传出的客户端请求，context控制请求的整个生命周期及其响应：获取连接，发送请求以及读取响应header和body。</p>
<h2 id="func-request-context">func (*Request) Context</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">Context</span>() <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>
</code></pre></div><p>Context返回请求的context。 若要更改context，请使用WithContext。</p>
<p>返回的context始终为非零； 它默认为 background context。 对于传出的客户端请求，context控制取消。</p>
<p>对于传入的服务器请求，当客户端的连接关闭，请求被取消（使用<code>HTTP/2</code>）或ServeHTTP方法返回时，context将被取消。</p>
<h2 id="func-request-cookie">func (*Request) Cookie</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">Cookie</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Cookie</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>Cookie返回请求中提供的命名cookie，如果未找到，则返回ErrNoCookie。如果多个Cookie与给定名称匹配，则仅返回一个Cookie。</p>
<h2 id="func-request-cookies">func (*Request) Cookies</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">Cookies</span>() []<span style="color:#f92672">*</span><span style="color:#a6e22e">Cookie</span>
</code></pre></div><p>Cookies解析并返回与请求一起发送的HTTP cookie。</p>
<h2 id="func-request-formfile">func (*Request) FormFile</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">FormFile</span>(<span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">multipart</span>.<span style="color:#a6e22e">File</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">multipart</span>.<span style="color:#a6e22e">FileHeader</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>FormFile返回提供的表单key的第一个文件。如果需要，FormFile调用ParseMultipartForm和ParseForm。</p>
<h2 id="func-request-formvalue">func (*Request) FormValue</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">FormValue</span>(<span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>
</code></pre></div><p>FormValue返回查询的命名组件的第一个值。 POST和PUT请求体的参数优先于URL查询字符串值。 FormValue在必要时调用ParseMultipartForm和ParseForm，并忽略这些函数返回的任何错误。 如果key不存在，则FormValue返回空字符串。 要访问同一key的多个值，请调用ParseForm，然后直接检查<code>Request.Form</code>。</p>
<h2 id="func-request-multipartreader">func (*Request) MultipartReader</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">MultipartReader</span>() (<span style="color:#f92672">*</span><span style="color:#a6e22e">multipart</span>.<span style="color:#a6e22e">Reader</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>如果这是<code>multipart/form-data</code>或<code>multipart/mixed </code>POST请求，则MultipartReader返回MIME分段阅读器，否则返回nil和错误。使用此函数代替ParseMultipartForm将请求体作为流处理。</p>
<h2 id="func-request-parseform">func (*Request) ParseForm</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">ParseForm</span>() <span style="color:#66d9ef">error</span>
</code></pre></div><p>ParseForm填充<code>r.Form</code>和<code>r.PostForm</code>。</p>
<p>对于所有请求，ParseForm都会从URL解析原始查询并更新<code>r.Form</code>。</p>
<p>对于POST，PUT和PATCH请求，它还将请求体解析为一种形式，并将结果放入<code>r.PostForm</code>和<code>r.Form</code>中。 请求体参数优先于<code>r.Form</code>中的URL查询字符串值。</p>
<p>对于其他HTTP方法，或者当Content-Type不是<code>application/x-www-form-urlencoded</code>时，不会读取请求体，并且<code>r.PostForm</code>初始化为非null的空值。</p>
<p>如果请求体的大小尚未受到MaxBytesReader的限制，则大小上限为10MB。</p>
<p>ParseMultipartForm自动调用ParseForm。 ParseForm是幂等的。</p>
<h2 id="func-request-parsemultipartform">func (*Request) ParseMultipartForm</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">ParseMultipartForm</span>(<span style="color:#a6e22e">maxMemory</span> <span style="color:#66d9ef">int64</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>ParseMultipartForm将请求体解析为<code>multipart/form-data</code>。 整个请求体将被解析，其文件部分的总计maxMemory字节最多存储在内存中，其余部分存储在磁盘上的临时文件中。</p>
<p>如果需要，ParseMultipartForm调用ParseForm。 一次调用ParseMultipartForm之后，后续调用无效。</p>
<h2 id="func-request-postformvalue">func (*Request) PostFormValue</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">PostFormValue</span>(<span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>
</code></pre></div><p>PostFormValue返回POST，PATCH或PUT请求体的命名组件的第一个值。 URL查询参数将被忽略。 如果需要，PostFormValue调用ParseMultipartForm和ParseForm，并忽略这些函数返回的任何错误。 如果键不存在，则PostFormValue返回空字符串。</p>
<h2 id="func-request-protoatleast">func (*Request) ProtoAtLeast</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">ProtoAtLeast</span>(<span style="color:#a6e22e">major</span>, <span style="color:#a6e22e">minor</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">bool</span>
</code></pre></div><p>ProtoAtLeast报告请求中使用的HTTP协议是否至少为<code>major.minor</code>。</p>
<h2 id="func-request-referer">func (*Request) Referer</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">Referer</span>() <span style="color:#66d9ef">string</span>
</code></pre></div><p>如果请求中发送了Referer，则返回Referering URL。</p>
<p>Referer来源网址拼写错误，就像请求本身一样，这是HTTP最早的错误。 该值也可以从Header map中提取为<code>Header [“Referer”]</code>; 将其作为方法使用的好处是，编译器可以诊断使用备用（正确的英语）拼写<code>req.Referrer()</code>的程序，但不能诊断使用<code>Header [“Referrer”]</code>的程序。</p>
<h2 id="func-request-setbasicauth">func (*Request) SetBasicAuth</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">SetBasicAuth</span>(<span style="color:#a6e22e">username</span>, <span style="color:#a6e22e">password</span> <span style="color:#66d9ef">string</span>)
</code></pre></div><p>SetBasicAuth将请求的Authorization header设置为使用HTTP基本身份验证以及提供的用户名和密码。</p>
<p>使用HTTP基本认证时，提供的用户名和密码未加密。</p>
<p>某些协议可能会对预转义用户名和密码提出其他要求。 例如，当与OAuth2一起使用时，两个参数都必须首先使用<code>url.QueryEscape</code>进行URL编码。</p>
<h2 id="func-request-useragent">func (*Request) UserAgent</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">UserAgent</span>() <span style="color:#66d9ef">string</span>
</code></pre></div><p>如果在请求中发送了UserAgent，则返回客户端的User-Agent。</p>
<h2 id="func-request-withcontext">func (*Request) WithContext</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">WithContext</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>
</code></pre></div><p>WithContext返回<code>r</code>的浅表副本，其context更改为ctx。 提供的ctx必须为非零。</p>
<p>对于传出的客户端请求，context控制请求的整个生命周期及其响应：获取连接，发送请求以及读取响应头和响应体。</p>
<p>要使用context创建新请求，请使用NewRequestWithContext。 要更改请求（例如传入）的context，您还需要修改以发送出去，请使用<code>Request.Clone</code>。 在这两种用途之间，很少需要WithContext。</p>
<h2 id="func-request-write">func (*Request) Write</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Writer</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>Write以传输格式写入<code>HTTP/1.1</code>请求，即请求头和请求体。此方法查询请求的以下字段：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">Host</span>
<span style="color:#a6e22e">URL</span>
<span style="color:#a6e22e">Method</span> (<span style="color:#a6e22e">defaults</span> <span style="color:#a6e22e">to</span> <span style="color:#e6db74">&#34;GET&#34;</span>)
<span style="color:#a6e22e">Header</span>
<span style="color:#a6e22e">ContentLength</span>
<span style="color:#a6e22e">TransferEncoding</span>
<span style="color:#a6e22e">Body</span>
</code></pre></div><p>如果存在请求体，则Content-Length为&lt;= 0，并且TransferEncoding尚未设置为“identity”，Write将“ Transfer-Encoding: chunked”添加到请求头，发送后将其关闭。</p>
<h2 id="func-request-writeproxy">func (*Request) WriteProxy</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) <span style="color:#a6e22e">WriteProxy</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Writer</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>WriteProxy类似于Write，但是以HTTP代理期望的形式写入请求。 特别是，WriteProxy根据RFC 7230的5.3节（包括scheme和host）用绝对URI写入请求的初始Request-URI行。无论哪种情况，WriteProxy都会使用<code>r.Host</code>或<code>r.URL.Host</code>写入Host header。</p>
<h2 id="type-response">type Response</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Response</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Status</span>     <span style="color:#66d9ef">string</span> <span style="color:#75715e">// e.g. &#34;200 OK&#34;
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">StatusCode</span> <span style="color:#66d9ef">int</span>    <span style="color:#75715e">// e.g. 200
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Proto</span>      <span style="color:#66d9ef">string</span> <span style="color:#75715e">// e.g. &#34;HTTP/1.0&#34;
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ProtoMajor</span> <span style="color:#66d9ef">int</span>    <span style="color:#75715e">// e.g. 1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ProtoMinor</span> <span style="color:#66d9ef">int</span>    <span style="color:#75715e">// e.g. 0
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Header将header key映射到value。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果响应中的多个header具有相同的键，则可以使用逗号分隔符将它们连接在一起。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// （RFC 7230第3.2.2节要求，多个header在语义上等效于逗号分隔的序列。）
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 当header值被该结构中的其他字段（例如ContentLength，TransferEncoding，Trailer）复制时，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这些字段值是权威的。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// map中的key已规范化（请参见CanonicalHeaderKey）。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Header</span> <span style="color:#a6e22e">Header</span>

    <span style="color:#75715e">// Body代表响应体。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 在读取“body”字段时，将按需流式传输响应体。 如果网络连接失败或服务器终止响应，则Body.Read调用将返回错误。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// http 的Client 和Transport 保证即使在没有响应体的响应或长度为零的响应中，响应体也始终为非零。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 关闭响应体是调用者的责任。 如果未读取并关闭响应体，则默认的HTTP客户端的传输可能不会重用HTTP/1.x“keep-alive” TCP连接。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 如果服务器回复了“分块”传输编码，则响应体将自动分块。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 从Go 1.12开始，Body还将在成功的“101交换协议”响应上实现io.Writer，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 该响应由WebSocket和HTTP/2的“h2c”模式使用。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Body</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">ReadCloser</span>

    <span style="color:#75715e">// ContentLength记录关联内容的长度。 值-1表示长度未知。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 除非Request.Method为“HEAD”，否则值&gt;=0表示可以从Body中读取给定的字节数。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ContentLength</span> <span style="color:#66d9ef">int64</span>

    <span style="color:#75715e">// 包含从最外部到最内部的传输编码。 值为nil，表示使用“identity”编码，即不进行编码。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">TransferEncoding</span> []<span style="color:#66d9ef">string</span>

    <span style="color:#75715e">// Close记录在读取响应体后，header是否指示关闭连接。 该值是给客户的建议：ReadResponse和Response.Write都不会关闭连接。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Close</span> <span style="color:#66d9ef">bool</span>

    <span style="color:#75715e">// Uncompressed报告响应是否已压缩发送，并已被http包解压缩。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果为true，则从Body读取将产生未压缩的内容，而不是从服务器实际设置的压缩内容，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// ContentLength设置为-1，并且从responseHeader中删除“Content-Length”和“Content-Encoding”字段。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 要从服务器获取原始响应，请将Transport.DisableCompression设置为true。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Uncompressed</span> <span style="color:#66d9ef">bool</span>

    <span style="color:#75715e">// Trailer将trailer键映射到与header相同格式的值。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Trailer最初仅包含nil值，服务器“Trailer”header值中指定的每个键对应一个值。这些值不会添加到Header中。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 不得在响应体上与Read调用同时访问Trailer。 在Body.Read返回io.EOF之后，Trailer将包含服务器发送的所有trailer值。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Trailer</span> <span style="color:#a6e22e">Header</span>
    <span style="color:#75715e">// Request是为获取此响应而发送的请求。 请求体为零（已被消耗）。 仅针对客户端请求填充。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Request</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>

    <span style="color:#75715e">// TLS包含有关在其上接收到响应的TLS连接的信息。 对于未加密的响应，它为nil。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 指针在响应之间共享，不应修改。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">TLS</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">tls</span>.<span style="color:#a6e22e">ConnectionState</span>
}
</code></pre></div><p>响应表示来自HTTP请求的响应。 一旦收到响应头，Client和Transport将从服务器返回响应。在读取“Body”字段时，将按需流式传输响应体。</p>
<h2 id="func-get">func Get</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Get</span>(<span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">resp</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
</code></pre></div><p>Get将GET发送到指定的URL。如果响应是以下重定向代码之一，则Get将遵循该重定向，最多10个重定向：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ae81ff">301</span> (<span style="color:#a6e22e">Moved</span> <span style="color:#a6e22e">Permanently</span>)
<span style="color:#ae81ff">302</span> (<span style="color:#a6e22e">Found</span>)
<span style="color:#ae81ff">303</span> (<span style="color:#a6e22e">See</span> <span style="color:#a6e22e">Other</span>)
<span style="color:#ae81ff">307</span> (<span style="color:#a6e22e">Temporary</span> <span style="color:#a6e22e">Redirect</span>)
<span style="color:#ae81ff">308</span> (<span style="color:#a6e22e">Permanent</span> <span style="color:#a6e22e">Redirect</span>)
</code></pre></div><p>如果重定向太多或HTTP协议错误，则返回错误。 非2xx响应不会导致错误。 返回的任何错误均为<code>*url.Error</code>类型。 如果请求超时或被取消，则<code>url.Error</code>值的Timeout方法将报告true。</p>
<p>当err为nil时，resp始终包含一个非nil <code>resp.Body</code>。 调用者完成读取后，应关闭<code>resp.Body</code>。 Get是<code>DefaultClient.Get</code>的包装。 要使用自定义header发出请求，请使用NewRequest和<code>DefaultClient.Do</code>。</p>
<h2 id="exampleget">Example（Get）</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">res</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;http://www.google.com/robots.txt&#34;</span>)
<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
    <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
}
<span style="color:#a6e22e">robots</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadAll</span>(<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">Body</span>)
<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">Body</span>.<span style="color:#a6e22e">Close</span>()
<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
    <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
}
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%s&#34;</span>, <span style="color:#a6e22e">robots</span>)
</code></pre></div><h2 id="func-head">func Head</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Head</span>(<span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">resp</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
</code></pre></div><p>Head向指定的URL发出HEAD。如果响应是以下重定向代码之一，则Head遵循该重定向，最多10个重定向：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ae81ff">301</span> (<span style="color:#a6e22e">Moved</span> <span style="color:#a6e22e">Permanently</span>)
<span style="color:#ae81ff">302</span> (<span style="color:#a6e22e">Found</span>)
<span style="color:#ae81ff">303</span> (<span style="color:#a6e22e">See</span> <span style="color:#a6e22e">Other</span>)
<span style="color:#ae81ff">307</span> (<span style="color:#a6e22e">Temporary</span> <span style="color:#a6e22e">Redirect</span>)
<span style="color:#ae81ff">308</span> (<span style="color:#a6e22e">Permanent</span> <span style="color:#a6e22e">Redirect</span>)
</code></pre></div><p>Head是<code>DefaultClient.Head</code>的包装器。</p>
<h2 id="func-post">func Post</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Post</span>(<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">contentType</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">body</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Reader</span>) (<span style="color:#a6e22e">resp</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
</code></pre></div><p>Post发布POST到指定的URL。 调用者完成读取后，应关闭<code>resp.Body</code>。 如果提供的body是<code>io.Closer</code>，则在请求后将其关闭。</p>
<p>Post是<code>DefaultClient.Post</code>的包装。 要设置自定义header，请使用NewRequest和<code>DefaultClient.Do</code>。 有关如何处理重定向的详细信息，请参阅<code>Client.Do</code>方法文档。</p>
<h2 id="func-postform">func PostForm</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">PostForm</span>(<span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">data</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Values</span>) (<span style="color:#a6e22e">resp</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>)
</code></pre></div><p>PostForm向指定的URL发出POST，并将数据的键和值URL编码为请求体。 Content-Type header设置为<code>application/x-www-form-urlencoded</code>。 要设置其他header，请使用NewRequest和<code>DefaultClient.Do</code>。</p>
<p>当err为nil时，resp始终包含一个非nil <code>resp.Body</code>。 调用者完成读取后，应关闭<code>resp.Body</code>。 PostForm是<code>DefaultClient.PostForm</code>的包装。 有关如何处理重定向的详细信息，请参阅<code>Client.Do</code>方法文档。</p>
<h2 id="func-readresponse">func ReadResponse</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadResponse</span>(<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bufio</span>.<span style="color:#a6e22e">Reader</span>, <span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>ReadResponse从<code>r</code>读取并返回HTTP响应。 req参数可选地指定与此响应相对应的请求。 如果为零，则假定为GET请求。</p>
<p>读取完<code>resp.Body</code>后，客户端必须调用<code>resp.Body.Close</code>。 调用之后，客户端可以检查trailer，以查找响应tailer中包含的键/值对。</p>
<h2 id="func-response-cookies">func (*Response) Cookies</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>) <span style="color:#a6e22e">Cookies</span>() []<span style="color:#f92672">*</span><span style="color:#a6e22e">Cookie</span>
</code></pre></div><p>Cookies解析并返回Set-Cookie header中设置的cookie。</p>
<h2 id="func-response-location">func (*Response) Location</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>) <span style="color:#a6e22e">Location</span>() (<span style="color:#f92672">*</span><span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">URL</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>Location返回响应的“location”header（如果存在）的URL。相对重定向是相对于响应的请求来解决的。如果不存在Location header，则返回ErrNoLocation。</p>
<h2 id="func-response-protoatleast">func (*Response) ProtoAtLeast</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>) <span style="color:#a6e22e">ProtoAtLeast</span>(<span style="color:#a6e22e">major</span>, <span style="color:#a6e22e">minor</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">bool</span>
</code></pre></div><p>ProtoAtLeast报告响应中使用的HTTP协议是否至少为<code>major.minor</code>。</p>
<h2 id="func-response-write">func (*Response) Write</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>) <span style="color:#a6e22e">Write</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Writer</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>Write以<code>HTTP/1.x</code>服务器响应格式将<code>r</code>写入<code>w</code>，包括状态行，header，body和可选的trailer。 此方法查询响应<code>r</code>的以下字段：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">StatusCode</span>
<span style="color:#a6e22e">ProtoMajor</span>
<span style="color:#a6e22e">ProtoMinor</span>
<span style="color:#a6e22e">Request</span>.<span style="color:#a6e22e">Method</span>
<span style="color:#a6e22e">TransferEncoding</span>
<span style="color:#a6e22e">Trailer</span>
<span style="color:#a6e22e">Body</span>
<span style="color:#a6e22e">ContentLength</span>
<span style="color:#a6e22e">Header</span>, <span style="color:#a6e22e">values</span> <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">non</span><span style="color:#f92672">-</span><span style="color:#a6e22e">canonical</span> <span style="color:#a6e22e">keys</span> <span style="color:#a6e22e">will</span> <span style="color:#a6e22e">have</span> <span style="color:#a6e22e">unpredictable</span> <span style="color:#a6e22e">behavior</span>
</code></pre></div><p>发送后，响应体将关闭。</p>
<h2 id="type-responsewriter">type ResponseWriter</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">ResponseWriter</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#75715e">// Header返回将由WriteHeader发送的header map。header map也是handler可以用来设置HTTP trailer的机制。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 除非修改后的header是trailer，否则在调用WriteHeader（或Write）后更改header map无效。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 设置trailer有两种方法。 首选方法是在header中预先声明稍后将发送的trailer，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 方法是将“Trailer”header设置为稍后将出现的键的名称。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 在这种情况下，Header映射的那些键被视为trailer。参见示例。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 第二种方法是，对于直到第一次处理之后才被handler所知的trailer键，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 在Header映射键之前加上TrailerPrefix常量值。 请参阅TrailerPrefix。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 要取消自动响应header（例如“Date”），请设置它们的值为nil。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Header</span>() <span style="color:#a6e22e">Header</span>

    <span style="color:#75715e">// Write将数据作为HTTP回复的一部分写入连接。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 如果尚未调用WriteHeader，则Write在写入数据之前会调用WriteHeader（http.StatusOK）。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果header不包含Content-Type行，则Write将Content-Type集添加到将初始512字节的写入数据传递到DetectContentType的结果中。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 此外，如果所有写入数据的总大小小于几KB，并且没有Flush调用，则会自动添加Content-Length header。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 根据HTTP协议版本和客户端，调用Write或WriteHeader可能会阻止将来对Request.Body进行读取。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于HTTP/1.x请求，handler应在写入响应之前读取所有需要的请求体数据。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 刷新header后（由于显式的Flusher.Flush调用或写入足够的数据以触发刷新），请求体可能不可用。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 对于HTTP/2请求，Go HTTP服务器允许handler在同时写入响应的同时继续读取请求体。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 但是，并非所有的HTTP/2客户端都支持这种行为。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果可能，handler应在写入之前先进行读取，以最大程度地实现兼容性。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Write</span>([]<span style="color:#66d9ef">byte</span>) (<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">error</span>)

    <span style="color:#75715e">// WriteHeader发送带有提供的状态代码的HTTP响应头。 如果未显式调用WriteHeader，则对Write的第一次调用将触发一个隐式WriteHeader（http.StatusOK）。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 因此，对WriteHeader的显式调用主要用于发送错误代码。 提供的代码必须是有效的HTTP 1xx-5xx状态代码。 只能写入一个header。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Go当前不支持发送用户定义的1xx信息性header，但服务器会在读取Request.Body时自动发送的100-xx响应头，但不支持发送该header。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">WriteHeader</span>(<span style="color:#a6e22e">statusCode</span> <span style="color:#66d9ef">int</span>)
}
</code></pre></div><p>HTTP handler使用ResponseWriter接口构造HTTP响应。 返回<code>Handler.ServeHTTP</code>方法后，不得使用ResponseWriter。</p>
<h2 id="exampletrailer">Example（Trailer）</h2>
<p>HTTP Trailer是一组键/值对，例如header，位于HTTP响应之后而不是之前。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">mux</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">NewServeMux</span>()
<span style="color:#a6e22e">mux</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/sendstrailers&#34;</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
    <span style="color:#75715e">// 在对WriteHeader或Write的任何调用之前，声明将在HTTP响应期间设置的Trailer。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这三个header实际上是在Trailer中发送的。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Header</span>().<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;Trailer&#34;</span>, <span style="color:#e6db74">&#34;AtEnd1, AtEnd2&#34;</span>)
    <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Header</span>().<span style="color:#a6e22e">Add</span>(<span style="color:#e6db74">&#34;Trailer&#34;</span>, <span style="color:#e6db74">&#34;AtEnd3&#34;</span>)

    <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Header</span>().<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;text/plain; charset=utf-8&#34;</span>) <span style="color:#75715e">// normal header
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">WriteHeader</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">StatusOK</span>)

    <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Header</span>().<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;AtEnd1&#34;</span>, <span style="color:#e6db74">&#34;value 1&#34;</span>)
    <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">WriteString</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;This HTTP response has both headers before this text and trailers at the end.\n&#34;</span>)
    <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Header</span>().<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;AtEnd2&#34;</span>, <span style="color:#e6db74">&#34;value 2&#34;</span>)
    <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Header</span>().<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;AtEnd3&#34;</span>, <span style="color:#e6db74">&#34;value 3&#34;</span>) <span style="color:#75715e">// These will appear as trailers.
</span><span style="color:#75715e"></span>})
</code></pre></div><h2 id="type-roundtripper">type RoundTripper</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">RoundTripper</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#75715e">// RoundTrip执行一个HTTP事务，为提供的请求返回响应。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// RoundTrip不应尝试解释响应。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 特别是，如果RoundTrip获得响应，则必须返回err == nil，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 而不管响应的HTTP状态代码如何。如果失败，则应保留非null错误。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 同样，RoundTrip不应尝试处理更高级别的协议详细信息，例如重定向，身份验证或cookie。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 除了消费和关闭请求体之外，RoundTrip不应修改请求。 RoundTrip可以在单独的goroutine中读取请求的字段。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 在响应体关闭之前，调用者不应更改或重用请求。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// RoundTrip必须要关闭响应体，包括发生错误时，但根据实现的不同，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 即使在RoundTrip返回之后，也可能在单独的goroutine中关闭它。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这意味着希望重用响应体以用于后续请求的调用者必须安排在等待Close调用之后再这样做。
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// 请求的URL和Header字段必须初始化。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">RoundTrip</span>(<span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#66d9ef">error</span>)
}
</code></pre></div><p>RoundTripper是表示执行单个HTTP事务，获取给定请求的响应的能力的接口。RoundTripper必须安全，可以同时被多个goroutine使用。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">DefaultTransport</span> <span style="color:#a6e22e">RoundTripper</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Transport</span>{
    <span style="color:#a6e22e">Proxy</span>: <span style="color:#a6e22e">ProxyFromEnvironment</span>,
    <span style="color:#a6e22e">DialContext</span>: (<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Dialer</span>{
        <span style="color:#a6e22e">Timeout</span>:   <span style="color:#ae81ff">30</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>,
        <span style="color:#a6e22e">KeepAlive</span>: <span style="color:#ae81ff">30</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>,
        <span style="color:#a6e22e">DualStack</span>: <span style="color:#66d9ef">true</span>,
    }).<span style="color:#a6e22e">DialContext</span>,
    <span style="color:#a6e22e">ForceAttemptHTTP2</span>:     <span style="color:#66d9ef">true</span>,
    <span style="color:#a6e22e">MaxIdleConns</span>:          <span style="color:#ae81ff">100</span>,
    <span style="color:#a6e22e">IdleConnTimeout</span>:       <span style="color:#ae81ff">90</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>,
    <span style="color:#a6e22e">TLSHandshakeTimeout</span>:   <span style="color:#ae81ff">10</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>,
    <span style="color:#a6e22e">ExpectContinueTimeout</span>: <span style="color:#ae81ff">1</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>,
}
</code></pre></div><p>DefaultTransport是Transport的默认实现，由DefaultClient使用。 它根据需要建立网络连接，并缓存它们以供后续调用重用。 它按照<code>$HTTP_PROXY</code>和<code>$NO_PROXY</code>（或<code>$http_proxy</code>和<code>$no_proxy</code>）环境变量的指示使用HTTP代理。</p>
<h2 id="func-newfiletransport">func NewFileTransport</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewFileTransport</span>(<span style="color:#a6e22e">fs</span> <span style="color:#a6e22e">FileSystem</span>) <span style="color:#a6e22e">RoundTripper</span>
</code></pre></div><p>NewFileTransport返回一个新的RoundTripper，服务于提供的FileSystem。 返回的RoundTripper会忽略传入请求中的URL host以及该请求的大多数其他属性。 NewFileTransport的典型用例是在TRansport中注册“file”协议，如下所示：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Transport</span>{}
<span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">RegisterProtocol</span>(<span style="color:#e6db74">&#34;file&#34;</span>, <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">NewFileTransport</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Dir</span>(<span style="color:#e6db74">&#34;/&#34;</span>)))
<span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Client</span>{<span style="color:#a6e22e">Transport</span>: <span style="color:#a6e22e">t</span>}
<span style="color:#a6e22e">res</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#e6db74">&#34;file:///etc/passwd&#34;</span>)
<span style="color:#f92672">...</span>
</code></pre></div><h2 id="type-samesite">type SameSite</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">SameSite</span> <span style="color:#66d9ef">int</span>
</code></pre></div><p>SameSite允许服务器定义cookie属性，从而使浏览器无法将cookie与跨站点请求一起发送。 主要目标是减轻跨域信息泄漏的风险，并提供针对跨站点请求伪造攻击的某种保护。</p>
<p>更多信息点击<a href="https://tools.ietf.org/html/draft-ietf-httpbis-cookie-same-site-00">这里</a>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> (
    <span style="color:#a6e22e">SameSiteDefaultMode</span> <span style="color:#a6e22e">SameSite</span> = <span style="color:#66d9ef">iota</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
    <span style="color:#a6e22e">SameSiteLaxMode</span>
    <span style="color:#a6e22e">SameSiteStrictMode</span>
    <span style="color:#a6e22e">SameSiteNoneMode</span>
)
</code></pre></div><h2 id="type-servemux">type ServeMux</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">ServeMux</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">mu</span>    <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">RWMutex</span>
    <span style="color:#a6e22e">m</span>     <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">muxEntry</span>
    <span style="color:#a6e22e">es</span>    []<span style="color:#a6e22e">muxEntry</span> <span style="color:#75715e">// slice of entries sorted from longest to shortest.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">hosts</span> <span style="color:#66d9ef">bool</span>       <span style="color:#75715e">// whether any patterns contain hostnames
</span><span style="color:#75715e"></span>}
</code></pre></div><p>ServeMux是一个HTTP请求多路复用器。它根据注册的模式列表将每个传入请求的URL匹配，并为与URL最匹配的模式调用处理程序。</p>
<p>模式命名固定的，有根的路径（例如<code>“/favicon.ico”</code>）或有根的子树（例如<code>“/images/”</code>）（请注意结尾的斜杠）。较长的模式优先于较短的模式，因此，如果同时为<code>“/images/”</code>和<code>“/images/thumbnails/”</code>注册了handler，则将为从<code>“/images/thumbnails/”</code>开始的路径调用后handler，将在<code>“/images/”</code>子树中接收对任何其他路径的请求。</p>
<p>请注意，由于以斜杠结尾的模式命名了一个有根的子树，因此模式<code>“/”</code>与所有其他已注册模式不匹配的路径匹配，而不仅仅是<code>Path==“/”</code>的URL。</p>
<p>如果已经注册了一个子树，并且接收到一个命名该子树根的请求而没有其后斜杠，则ServeMux将该请求重定向到该子树根（添加后斜杠）。可以用单独的路径注册来覆盖此行为，而不必使用斜杠。例如，注册<code>“/images/”</code>会使ServeMux将对<code>“/images”</code>的请求重定向到<code>“/images/”</code>，除非已单独注册了<code>“/images”</code>。</p>
<p>模式可以选择以主机名开头，仅将匹配项限制在该主机上。特定于主机的模式优先于常规模式，因​​此处理程序可以注册两个模式<code>“/codesearch”</code>和<code>“codesearch.google.com/”</code>，而不必同时接收对<code>“http://www.google.com/”</code>的请求”。</p>
<p>ServeMux还负责清理URL请求路径和Host header，清除端口号并重定向任何包含的请求<code>.</code>或<code>..</code>元素，或重复的斜杠表示为等效的，更简洁的URL。</p>
<h2 id="func-newservemux">func NewServeMux</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewServeMux</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">ServeMux</span>
</code></pre></div><p>NewServeMux分配并返回一个新的ServeMux。</p>
<h2 id="func-servemux-handle">func (*ServeMux) Handle</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">mux</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">ServeMux</span>) <span style="color:#a6e22e">Handle</span>(<span style="color:#a6e22e">pattern</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">handler</span> <span style="color:#a6e22e">Handler</span>)
</code></pre></div><p>Handle注册给定模式的处理程序。如果已经存在用于模式的处理程序，则Handle发出运行时恐慌（panic）。</p>
<h2 id="example-1">Example</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">mux</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">NewServeMux</span>()
<span style="color:#a6e22e">mux</span>.<span style="color:#a6e22e">Handle</span>(<span style="color:#e6db74">&#34;/api/&#34;</span>, <span style="color:#a6e22e">apiHandler</span>{})
<span style="color:#a6e22e">mux</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
    <span style="color:#75715e">// “/”模式匹配所有内容，因此我们需要检查我们是否在root这里。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">URL</span>.<span style="color:#a6e22e">Path</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;/&#34;</span> {
        <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">NotFound</span>(<span style="color:#a6e22e">w</span>, <span style="color:#a6e22e">req</span>)
        <span style="color:#66d9ef">return</span>
    }
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Fprintf</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;Welcome to the home page!&#34;</span>)
})
</code></pre></div><h2 id="func-servemux-handlefunc">func (*ServeMux) HandleFunc</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">mux</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">ServeMux</span>) <span style="color:#a6e22e">HandleFunc</span>(<span style="color:#a6e22e">pattern</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">handler</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>))
</code></pre></div><p>HandleFunc注册给定模式的处理函数。</p>
<h2 id="func-servemux-handler">func (*ServeMux) Handler</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">mux</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">ServeMux</span>) <span style="color:#a6e22e">Handler</span>(<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) (<span style="color:#a6e22e">h</span> <span style="color:#a6e22e">Handler</span>, <span style="color:#a6e22e">pattern</span> <span style="color:#66d9ef">string</span>)
</code></pre></div><p>Handler通过访问<code>r.Method</code>，<code>r.Host</code>和<code>r.URL.Path</code>返回用于给定请求的处理程序。 它总是返回一个非nil handler。 如果路径的格式不规范，则该handler将是内部生成的handler，该handler将重定向到规范路径。 如果主机包含端口，则在匹配处理程序时将忽略该端口。</p>
<p>path和host不做变更直接用于CONNECT请求。</p>
<p>Handler还会返回与请求匹配的已注册模式，如果是内部生成的重定向，则返回在跟随重定向之后将匹配的模式。 如果没有适用于该请求的注册handler，则处理程序返回一个<code>“找不到页面'”</code>处理程序和一个空模式。</p>
<h2 id="func-servemux-servehttp">func (*ServeMux) ServeHTTP</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">mux</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">ServeMux</span>) <span style="color:#a6e22e">ServeHTTP</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>)
</code></pre></div><p>ServeHTTP将请求调度到其模式与请求URL最匹配的处理程序。</p>
<h2 id="type-server">type Server</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Server</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Addr</span>    <span style="color:#66d9ef">string</span>  <span style="color:#75715e">// 监听的TCP地址 , 如果为空，则为&#34;:http&#34;
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Handler</span> <span style="color:#a6e22e">Handler</span> <span style="color:#75715e">// 要调用的处理程序，如果为空则为 http.DefaultServeMux
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// TLSConfig可选地提供TLS配置，以供ServeTLS和ListenAndServeTLS使用。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 请注意，此值由ServeTLS和ListenAndServeTLS克隆，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 因此无法使用tls.Config.SetSessionTicketKeys之类的方法修改配置。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 若要使用SetSessionTicketKeys，请改为将Server.Serve与TLS侦听器一起使用。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">TLSConfig</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">tls</span>.<span style="color:#a6e22e">Config</span>

    <span style="color:#75715e">// ReadTimeout是读取整个请求（包括请求体）的最大持续时间。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 由于ReadTimeout不允许处理程序根据每个请求体的可接受截止日期或上载速率做出每个请求的决定，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 因此大多数用户将更喜欢使用ReadHeaderTimeout。 两者都使用也是有效的。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ReadTimeout</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>

    <span style="color:#75715e">// ReadHeaderTimeout是允许读取请求头的时间量。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 读取请求体后，将重置连接的读取截止时间，并且Handler可以确定对Body而言太慢的速度。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果ReadHeaderTimeout为零，则使用ReadTimeout的值。 如果两者均为零，则没有超时。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ReadHeaderTimeout</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>

    <span style="color:#75715e">// WriteTimeout是写入响应超时之前的最大持续时间。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 每当读取新请求头时，都会将其重置。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 与ReadTimeout一样，它也不允许处理程序根据每个请求做出决策。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">WriteTimeout</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>

    <span style="color:#75715e">// IdleTimeout是启用保持活动状态后等待下一个请求的最长时间。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果IdleTimeout为零，则使用ReadTimeout的值。 如果两者均为零，则没有超时。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">IdleTimeout</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>

    <span style="color:#75715e">// MaxHeaderBytes控制服务器读取的最大字节数，以解析请求头的键和值（包括请求行）。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 它不限制请求体的大小。 如果为零，则使用DefaultMaxHeaderBytes。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">MaxHeaderBytes</span> <span style="color:#66d9ef">int</span>

    <span style="color:#75715e">// TLSNextProto可以选择指定一个函数，以在进行NPN/ALPN协议升级时接管所提供的TLS连接的所有权。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// map的key是协商的协议名称。 Handler参数应用于处理HTTP请求，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 并将初始化请求的TLS和RemoteAddr（如果尚未设置）。 函数返回时，连接将自动关闭。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果TLSNextProto不为nil，则不会自动启用HTTP/2支持。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">TLSNextProto</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">func</span>(<span style="color:#f92672">*</span><span style="color:#a6e22e">Server</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">tls</span>.<span style="color:#a6e22e">Conn</span>, <span style="color:#a6e22e">Handler</span>)

    <span style="color:#75715e">// ConnState指定一个可选的回调函数，当客户端连接更改状态时调用该函数。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 有关详细信息，请参见ConnState类型和关联的常量。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ConnState</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Conn</span>, <span style="color:#a6e22e">ConnState</span>)

    <span style="color:#75715e">// ErrorLog指定一个可选的记录器，用于接收连接的错误，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 来自处理程序的意外行为以及潜在的FileSystem错误。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果为nil，则通过日志包的标准记录器完成记录。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ErrorLog</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Logger</span>


    <span style="color:#75715e">// BaseContext可以选择指定一个函数，该函数返回此服务器上传入请求的基本context。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 提供的侦听器是即将开始接收请求的特定侦听器。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果BaseContext为nil，则默认值为context.Background()。 如果为非nil，则它必须返回非nil Context。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">BaseContext</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Listener</span>) <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>

    <span style="color:#75715e">// ConnContext可选地指定一个函数，该函数修改用于新连接的上下文c。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 提供的ctx派生自基本上下文，并且具有ServerContextKey值。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ConnContext</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">c</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Conn</span>) <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>

    <span style="color:#a6e22e">disableKeepAlives</span> <span style="color:#66d9ef">int32</span>     <span style="color:#75715e">// accessed atomically.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">inShutdown</span>        <span style="color:#66d9ef">int32</span>     <span style="color:#75715e">// accessed atomically (non-zero means we&#39;re in Shutdown)
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">nextProtoOnce</span>     <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Once</span> <span style="color:#75715e">// guards setupHTTP2_* init
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">nextProtoErr</span>      <span style="color:#66d9ef">error</span>     <span style="color:#75715e">// result of http2.ConfigureServer if used
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">mu</span>         <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Mutex</span>
    <span style="color:#a6e22e">listeners</span>  <span style="color:#66d9ef">map</span>[<span style="color:#f92672">*</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Listener</span>]<span style="color:#66d9ef">struct</span>{}
    <span style="color:#a6e22e">activeConn</span> <span style="color:#66d9ef">map</span>[<span style="color:#f92672">*</span><span style="color:#a6e22e">conn</span>]<span style="color:#66d9ef">struct</span>{}
    <span style="color:#a6e22e">doneChan</span>   <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">struct</span>{}
    <span style="color:#a6e22e">onShutdown</span> []<span style="color:#66d9ef">func</span>()
}
</code></pre></div><p>Server定义用于运行HTTP服务器的参数。服务器的零值是有效配置。</p>
<h2 id="func-server-close">func (*Server) Close</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">srv</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Server</span>) <span style="color:#a6e22e">Close</span>() <span style="color:#66d9ef">error</span>
</code></pre></div><p>Close立即关闭所有活动的<code>net.Listeners</code>以及状态StateNew，StateActive或StateIdle中的所有连接。 要优雅的关机，请使用Shutdown。</p>
<p>Close不会尝试关闭（甚至不知道）任何被劫持的连接，例如WebSockets。 Close返回从关闭服务器的基础侦听器返回的任何错误。</p>
<h2 id="func-server-listenandserve">func (*Server) ListenAndServe</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">srv</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Server</span>) <span style="color:#a6e22e">ListenAndServe</span>() <span style="color:#66d9ef">error</span>
</code></pre></div><p>ListenAndServe侦听TCP网络地址<code>srv.Addr</code>，然后调用Serve处理传入连接上的请求。 接受的连接配置为启用TCP保持活动状态。</p>
<p>如果<code>srv.Addr</code>为空，则使用<code>“:http”</code>。</p>
<p>ListenAndServe始终返回非nil错误。 Shutdown或Close后，返回的错误为ErrServerClosed。</p>
<h2 id="func-server-listenandservetls">func (*Server) ListenAndServeTLS</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">srv</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Server</span>) <span style="color:#a6e22e">ListenAndServeTLS</span>(<span style="color:#a6e22e">certFile</span>, <span style="color:#a6e22e">keyFile</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>ListenAndServeTLS侦听TCP网络地址<code>srv.Addr</code>，然后调用ServeTLS处理传入TLS连接上的请求。 接受的连接配置为启用TCP keep-alives。</p>
<p>如果未填充服务器的<code>TLSConfig.Certificates</code>或<code>TLSConfig.GetCertificate</code>，则必须提供包含证书和服务器匹配私钥的文件名。 如果证书是由证书颁发机构签名的，则certFile应该是服务器证书，任何中间件和CA证书的串联。</p>
<p>如果<code>srv.Addr</code>为空，则使用<code>“:https”</code>。</p>
<p>ListenAndServeTLS始终返回非nil错误。 Shutdown或Close后，返回的错误为ErrServerClosed。</p>
<h2 id="func-server-registeronshutdown">func (*Server) RegisterOnShutdown</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">srv</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Server</span>) <span style="color:#a6e22e">RegisterOnShutdown</span>(<span style="color:#a6e22e">f</span> <span style="color:#66d9ef">func</span>())
</code></pre></div><p>RegisterOnShutdown注册一个函数来调用Shutdown。 这可用于正常关闭已进行NPN/ALPN协议升级或被劫持的连接。 此功能应启动特定于协议的正常关机，但不应等待关机完成。</p>
<h2 id="func-server-serve">func (*Server) Serve</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">srv</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Server</span>) <span style="color:#a6e22e">Serve</span>(<span style="color:#a6e22e">l</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Listener</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>服务在侦听器<code>l</code>上接受传入连接，为每个连接创建一个新的服务goroutine。 服务goroutine读取请求，然后调用<code>srv.Handler</code>对其进行回复。</p>
<p>仅当侦听器返回<code>*tls.Conn</code>连接并且在<code>TLSConfig.NextProtos</code>中将它们配置为<code>“h2”</code>时，才启用<code>HTTP/2</code>支持。</p>
<p>服务始终返回非零错误并关闭<code>l</code>。 Shutdown或Close后，返回的错误为ErrServerClosed。</p>
<h2 id="func-server-servetls">func (*Server) ServeTLS</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">srv</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Server</span>) <span style="color:#a6e22e">ServeTLS</span>(<span style="color:#a6e22e">l</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Listener</span>, <span style="color:#a6e22e">certFile</span>, <span style="color:#a6e22e">keyFile</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>ServeTLS在侦听器<code>l</code>上接受传入连接，为每个连接创建一个新的服务goroutine。 服务goroutine会执行TLS设置，然后读取请求，并调用<code>srv.Handler</code>对其进行回复。</p>
<p>如果未填充服务器的<code>TLSConfig.Certificates</code>或<code>TLSConfig.GetCertificate</code>，则必须提供包含证书和服务器匹配私钥的文件。</p>
<p>如果证书是由证书颁发机构签名的，则certFile应该是服务器证书，任何中间件和CA证书的串联。 ServeTLS始终返回非nil错误。 Shutdown或Close后，返回的错误为ErrServerClosed。</p>
<h2 id="func-server-setkeepalivesenabled">func (*Server) SetKeepAlivesEnabled</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">srv</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Server</span>) <span style="color:#a6e22e">SetKeepAlivesEnabled</span>(<span style="color:#a6e22e">v</span> <span style="color:#66d9ef">bool</span>)
</code></pre></div><p>SetKeepAlivesEnabled控制是否启用HTTP keep-alive。默认情况下，始终启用keep-alives状态。只有在资源非常有限的环境或正在关闭的服务器中才能禁用它们。</p>
<h2 id="func-server-shutdown">func (*Server) Shutdown</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">srv</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Server</span>) <span style="color:#a6e22e">Shutdown</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>Shutdown可以优雅的关闭服务器，而不会中断任何活动的连接。Shutdown的工作方式是先关闭所有打开的侦听器，然后关闭所有空闲连接，然后无限期等待连接返回到空闲状态，然后关闭。如果提供的上下文在关闭完成之前到期，则Shutdown返回上下文的错误，否则它将返回从关闭服务器的基础侦听器返回的任何错误。</p>
<p>调用Shutdown时，Serve，ListenAndServe和ListenAndServeTLS立即返回ErrServerClosed。确保程序没有退出，而是等待Shutdown返回。</p>
<p>Shutdown不会尝试关闭也不等待被劫持的连接，例如WebSockets。如果需要，Shutdown的调用者应单独通知此类长期存在的连接，并等待它们关闭。有关注册关闭通知功能的方法，请参见RegisterOnShutdown。</p>
<p>一旦在服务器上调用了Shutdown，就可能无法重用它。将来对诸如Serve之类的方法的调用将返回ErrServerClosed。</p>
<h3 id="example-2">Example</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">srv</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Server</span>

<span style="color:#a6e22e">idleConnsClosed</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">struct</span>{})
<span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
    <span style="color:#a6e22e">sigint</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Signal</span>, <span style="color:#ae81ff">1</span>)
    <span style="color:#a6e22e">signal</span>.<span style="color:#a6e22e">Notify</span>(<span style="color:#a6e22e">sigint</span>, <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Interrupt</span>)
    <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">sigint</span>

    <span style="color:#75715e">// We received an interrupt signal, shut down.
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">srv</span>.<span style="color:#a6e22e">Shutdown</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>()); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#75715e">// Error from closing listeners, or context timeout:
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;HTTP server Shutdown: %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }
    close(<span style="color:#a6e22e">idleConnsClosed</span>)
}()

<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">srv</span>.<span style="color:#a6e22e">ListenAndServe</span>(); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ErrServerClosed</span> {
    <span style="color:#75715e">// Error starting or closing listener:
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;HTTP server ListenAndServe: %v&#34;</span>, <span style="color:#a6e22e">err</span>)
}

<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">idleConnsClosed</span>
</code></pre></div><h2 id="type-transport">type Transport</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Transport</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#75715e">// Proxy指定一个函数来返回给定请求的代理。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果函数返回非零错误，则请求将中止并提供所提供的错误。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Proxy类型由URL scheme确定。 支持“http”，“ https”和“socks5”。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//  如果scheme为空，则假定为“http”。 如果Proxy为nil或返回nil *URL，则不使用任何代理。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Proxy</span> <span style="color:#66d9ef">func</span>(<span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">URL</span>, <span style="color:#66d9ef">error</span>)

    <span style="color:#75715e">// DialContext指定用于创建未加密的TCP连接的拨号功能。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果DialContext为nil（并且下面弃用的Dial也为nil），则Transport使用程序包net进行调用。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// DialContext与RoundTrip的调用同时运行。 当较早的连接在以后的DialContext完成之前变为空闲时，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 发起调用的RoundTrip调用可能会使用先前调用的连接结束。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">DialContext</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">network</span>, <span style="color:#a6e22e">addr</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Conn</span>, <span style="color:#66d9ef">error</span>)

    <span style="color:#75715e">// Dial指定用于创建未加密的TCP连接的拨号功能。 Dial与RoundTrip的调用同时运行。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 当较早的连接在之后的Dial完成之前变为空闲时，发起Dial的RoundTrip调用可能会使用先前调动的连接结束。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 弃用：改用DialContext，它允许Transport在不再需要调用时立即取消Dial。 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果两者都设置，则DialContext优先。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Dial</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">network</span>, <span style="color:#a6e22e">addr</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Conn</span>, <span style="color:#66d9ef">error</span>)

    <span style="color:#75715e">// DialTLS指定用于为非代理HTTPS请求创建TLS连接的可选Dial功能。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果DialTLS为nil，则使用Dial和TLSClientConfig。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果设置了DialTLS，则Dial挂钩不用于HTTPS请求，并且TLSClientConfig和TLSHandshakeTimeout将被忽略。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 假定返回的net.Conn已通过TLS握手。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">DialTLS</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">network</span>, <span style="color:#a6e22e">addr</span> <span style="color:#66d9ef">string</span>) (<span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">Conn</span>, <span style="color:#66d9ef">error</span>)

    <span style="color:#75715e">// TLSClientConfig指定要与tls.Client一起使用的TLS配置。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果为nil，则使用默认配置。 如果为非nil，则默认情况下可能不会启用HTTP/2支持。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">TLSClientConfig</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">tls</span>.<span style="color:#a6e22e">Config</span>

    <span style="color:#75715e">// TLSHandshakeTimeout指定等待TLS握手的最长时间。 零表示没有超时。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">TLSHandshakeTimeout</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>

    <span style="color:#75715e">// DisableKeepAlives（如果为true）将禁用HTTP keep-alives，并且仅将与服务器的连接用于单个HTTP请求。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这与类似命名的TCP keep-alives。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">DisableKeepAlives</span> <span style="color:#66d9ef">bool</span>

    <span style="color:#75715e">// DisableCompression如果为true，则当请求不包含现有的Accept-Encoding值时，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 阻止Transport使用“Accept-Encoding:gzip”请求Header请求压缩。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果Transport请求gzip并获得gzip压缩的响应，则会在Response.Body中对其进行透明解码。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 但是，如果用户明确请求gzip，则不会自动将其解压缩。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">DisableCompression</span> <span style="color:#66d9ef">bool</span>

    <span style="color:#75715e">// MaxIdleConns控制所有主机之间的最大空闲（keep-alive）连接数。 零表示无限制。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">MaxIdleConns</span> <span style="color:#66d9ef">int</span>

    <span style="color:#75715e">// MaxIdleConnsPerHost（如果非零）控制最大空闲（keep-alive）连接以保留每个主机。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果为零，则使用DefaultMaxIdleConnsPerHost。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">MaxIdleConnsPerHost</span> <span style="color:#66d9ef">int</span>

    <span style="color:#75715e">// MaxConnsPerHost可以选择限制每个主机的连接总数，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 包括处于拨号，活动和空闲状态的连接。 超出限制时，拨号将阻塞。 零表示无限制。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">MaxConnsPerHost</span> <span style="color:#66d9ef">int</span>

    <span style="color:#75715e">// IdleConnTimeout是空闲（keep-alive）连接在关闭自身之前将保持空闲状态的最长时间。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 零表示无限制。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">IdleConnTimeout</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>

    <span style="color:#75715e">// ResponseHeaderTimeout（如果非零）指定在完全写入请求（包括其Body（如果有））
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 之后等待服务器的响应头的时间。 该时间不包括读取响应体的时间。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ResponseHeaderTimeout</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>

    <span style="color:#75715e">// ExpectContinueTimeout（如果非零）指定如果请求具有“Expect: 100-continue”header，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 则在完全写入请求头之后等待服务器的第一个响应头的时间。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 零表示没有超时，并导致请求体立即发送，而无需等待服务器批准。 此时间不包括发送请求头的时间。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ExpectContinueTimeout</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>

    <span style="color:#75715e">// TLSNextProto指定在TLS NPN/ALPN协议协商之后，Transport如何切换到备用协议（例如HTTP/2）。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 如果Transport使用非空协议名称调用TLS连接，并且TLSNextProto包含该键的映射条目（例如“ h2”），
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 则将以请求的权限（例如“example.com”或“example .com:1234“）和TLS连接。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 该函数必须返回RoundTripper，然后再处理请求。 如果TLSNextProto不为nil，则不会自动启用HTTP/2支持。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">TLSNextProto</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">authority</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">c</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">tls</span>.<span style="color:#a6e22e">Conn</span>) <span style="color:#a6e22e">RoundTripper</span>

    <span style="color:#75715e">// ProxyConnectHeader可以选择指定在CONNECT请求期间发送给代理的header。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ProxyConnectHeader</span> <span style="color:#a6e22e">Header</span>

    <span style="color:#75715e">// MaxResponseHeaderBytes指定对服务器的响应头中允许的响应字节数的限制。 零表示使用默认限制。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">MaxResponseHeaderBytes</span> <span style="color:#66d9ef">int64</span>

    <span style="color:#75715e">// WriteBufferSize指定在写入Transport时使用的写入缓冲区的大小。 如果为零，则使用默认值（当前为4KB）。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">WriteBufferSize</span> <span style="color:#66d9ef">int</span>

    <span style="color:#75715e">// ReadBufferSize指定从Transport读取时使用的读取缓冲区的大小。 如果为零，则使用默认值（当前为4KB）。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ReadBufferSize</span> <span style="color:#66d9ef">int</span>

    <span style="color:#75715e">// 当提供非零Dial，DialTLS或DialContext函数或TLSClientConfig时，ForceAttemptHTTP2控制是否启用HTTP/2。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 默认情况下，保守地使用这些字段会禁用HTTP/2。要使用自定义Dial程序或TLS配置并仍尝试HTTP/2升级，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 请将其设置为true。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ForceAttemptHTTP2</span> <span style="color:#66d9ef">bool</span>

    <span style="color:#a6e22e">idleMu</span>       <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Mutex</span>
    <span style="color:#a6e22e">closeIdle</span>    <span style="color:#66d9ef">bool</span>                                <span style="color:#75715e">// user has requested to close all idle conns
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">idleConn</span>     <span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">connectMethodKey</span>][]<span style="color:#f92672">*</span><span style="color:#a6e22e">persistConn</span> <span style="color:#75715e">// most recently used at end
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">idleConnWait</span> <span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">connectMethodKey</span>]<span style="color:#a6e22e">wantConnQueue</span>  <span style="color:#75715e">// waiting getConns
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">idleLRU</span>      <span style="color:#a6e22e">connLRU</span>

    <span style="color:#a6e22e">reqMu</span>       <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Mutex</span>
    <span style="color:#a6e22e">reqCanceler</span> <span style="color:#66d9ef">map</span>[<span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>]<span style="color:#66d9ef">func</span>(<span style="color:#66d9ef">error</span>)

    <span style="color:#a6e22e">altMu</span>    <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Mutex</span>   <span style="color:#75715e">// guards changing altProto only
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">altProto</span> <span style="color:#a6e22e">atomic</span>.<span style="color:#a6e22e">Value</span> <span style="color:#75715e">// of nil or map[string]RoundTripper, key is URI scheme
</span><span style="color:#75715e"></span>
    <span style="color:#a6e22e">connsPerHostMu</span>   <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Mutex</span>
    <span style="color:#a6e22e">connsPerHost</span>     <span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">connectMethodKey</span>]<span style="color:#66d9ef">int</span>
    <span style="color:#a6e22e">connsPerHostWait</span> <span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">connectMethodKey</span>]<span style="color:#a6e22e">wantConnQueue</span> <span style="color:#75715e">// waiting getConns
</span><span style="color:#75715e"></span>
}
</code></pre></div><p>Transport是RoundTripper的实现，它支持HTTP，HTTPS和HTTP代理（对于HTTP或带CONNECT的HTTPS）。</p>
<p>默认情况下，Transport缓存连接以供将来重用。访问许多主机时，这可能会留下许多打开的连接。可以使用Transport的CloseIdleConnections方法以及MaxIdleConnsPerHost和DisableKeepAlives字段来管理此行为。</p>
<p>Transport应该被重用，而不是根据需要创建。多个goroutine并发使用Transport是安全的。Transport是用于发出HTTP和HTTPS请求的低级原语。有关Cookie和重定向之类的高级功能，请参阅Client。</p>
<p>Transport使用<code>HTTP/1.1</code>作为HTTP URL，<code>HTTP/1.1</code>或<code>HTTP/2</code>作为HTTPS URL，这取决于服务器是否支持<code>HTTP/2</code>，以及Transport的配置方式。 DefaultTransport支持<code>HTTP/2</code>。要在Transport上显式启用<code>HTTP/2</code>，请使用<code>golang.org/x/net/http2</code>并调用ConfigureTransport。有关HTTP/2的更多信息，请参见软件包文档。</p>
<p>状态代码在1xx范围内的响应将自动处理（100 expect-continue）或被忽略。一个例外是HTTP状态代码101（交换协议），它被认为是终止状态，由RoundTrip返回。若要查看被忽略的1xx响应，请使用httptrace跟踪包的<code>ClientTrace.Got1xxResponse</code>。</p>
<p>如果请求是幂等且没有请求体或已定义其<code>Request.GetBody</code>，则Transport仅在遇到网络错误时重试该请求。如果HTTP请求具有HTTP方法GET，HEAD，OPTIONS或TRACE，则它们被认为是幂等的。或者其header映射包含“Idempotency-Key”或“ X-Idempotency-Key”条目。如果幂等键值为零长度切片，则将请求视为幂等，但header不会在被发送出去。</p>
<h2 id="func-transport-clone">func (*Transport) Clone</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Transport</span>) <span style="color:#a6e22e">Clone</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">Transport</span>
</code></pre></div><p>Clone返回<code>t</code>导出字段的深层副本。</p>
<h2 id="func-transport-closeidleconnections">func (*Transport) CloseIdleConnections</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Transport</span>) <span style="color:#a6e22e">CloseIdleConnections</span>()
</code></pre></div><p>CloseIdleConnections关闭先前与以前的请求建立连接但现在处于“keep-alive”状态的空闲连接。它不会中断当前正在使用的任何连接。</p>
<h2 id="func-transport-registerprotocol">func (*Transport) RegisterProtocol</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Transport</span>) <span style="color:#a6e22e">RegisterProtocol</span>(<span style="color:#a6e22e">scheme</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">rt</span> <span style="color:#a6e22e">RoundTripper</span>)
</code></pre></div><p>RegisterProtocol使用scheme注册新协议。 Transport将使用给定scheme将请求传递给<code>rt</code>。 模拟HTTP请求语义是<code>rt</code>的责任。</p>
<p>其他包可以使用RegisterProtocol提供协议scheme的实现，例如“ftp”或“file”。 如果<code>rt.RoundTrip</code>返回ErrSkipAltProtocol，则Tramsport将为该请求处理RoundTrip本身，就像未注册协议一样。</p>
<h2 id="func-transport-roundtrip">func (*Transport) RoundTrip</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Transport</span>) <span style="color:#a6e22e">RoundTrip</span>(<span style="color:#a6e22e">req</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Request</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Response</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>RoundTrip实现RoundTripper接口。 有关更高级别的HTTP客户端支持（例如cookie和重定向的处理），请参阅Get，Post和Client类型。 与RoundTripper界面类似，RoundTrip返回的错误类型未指定。</p>

        </section>
      </div>
    </div>
  </div>  
  <div class="container">
    <div class="columns">
      <div class="column has-text-right is-family-monospace is-centered-tablet-portrait">
        上次修改:&nbsp;14 April 2020</div>
    </div>
  </div></section>
<footer class="footer footer-dark">
  <div class="container">
    <div class="columns">
      <div class="column">
        <img src="/footer.svg" alt="">
        
      </div>
      
    <div class="column">
        <div class="footer-column">
          <div class="footer-header">
              <h3>Website</h3>
          </div>
          <ul class="link-list"><li>
              <a href="/"><span class="icon"><i class="fa fa-home"></i></span> 主页</a>
            </li><li></li>
            <li><a href="/tags/">
                <span class="icon"><i class="fa fa-tag"></i></span> 
                所有类别
              </a></li>
          </ul>
        </div>
      </div>
    
      
      <div class="column">
        <div class="footer-column">
          <div class="footer-header">
              <h3>Contacts</h3>
          </div>
          <ul class="link-list">
            
            
            <li>
              <a href="https://github.com/Promacanthus" target="_blank">
                <span class="icon"><i class="fa fa-github"></i></span>
                
                  Github
                
              </a>
            </li>
                         
            
            <li>
              <a href="mailto:promacanthus@gmail.com" target="_blank">
                <span class="icon"><i class="fa fa-envelope"></i></span>
                
                  Gmail
                
              </a>
            </li>
            
                   
                   
                   
          </ul>
        </div>
      </div>
      

      
      <div class="column">
        <div class="footer-column">
          <div class="footer-header">
              <h3>Copyright</h3>
          </div>
          <ul class="link-list">
            <li>
              <a>
                <span class="icon"><i class="fa fa-copyright"></i></span>
                promacanthus - 2020
              </a>
            </li>
          </ul>
        </div>
      </div>
      

    </div>
  </div>
</footer>
    <div id="backtotop"><a href="#"></a></div><div class="sidebar">
  <div class="sidebar-header"><img src="/sidebar.svg" alt="">
    
    <a class="sidebar-close" href="javascript:void(0);">
      <i data-feather="x"></i>
    </a>
  </div>
  <div class="inner">
    <ul class="sidebar-menu">
      <li class="no-children"><a href="/tags/"><div class="columns">
              <table width="100%">  
                <tr>
                  <td class="">
                    <span class="icon"><i class="fa fa-cubes"></i></span>
                    所有类别
                  </td>
                  <td class="has-text-right" >
                      
                  </td>
                </tr>
              </table>
            </div>
          </a>
      <li class="no-children">
          <a href="/tags/">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>开发框架</td>
                    <td class="has-text-right" >
                        <div class="tag-number">316</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/go%e8%af%ad%e8%a8%80">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Go语言</td>
                    <td class="has-text-right" >
                        <div class="tag-number">115</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e4%ba%91%e5%8e%9f%e7%94%9f">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>云原生</td>
                    <td class="has-text-right" >
                        <div class="tag-number">114</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e6%a0%b7%e4%be%8b%e4%bb%a3%e7%a0%81">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>样例代码</td>
                    <td class="has-text-right" >
                        <div class="tag-number">73</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/kubernetes">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Kubernetes</td>
                    <td class="has-text-right" >
                        <div class="tag-number">53</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>开发框架</td>
                    <td class="has-text-right" >
                        <div class="tag-number">37</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/docker">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Docker</td>
                    <td class="has-text-right" >
                        <div class="tag-number">33</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%9f%ba%e7%a1%80">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>基础</td>
                    <td class="has-text-right" >
                        <div class="tag-number">30</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%a1%ab%e5%9d%91%e8%ae%b0">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>填坑记</td>
                    <td class="has-text-right" >
                        <div class="tag-number">20</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/helm">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Helm</td>
                    <td class="has-text-right" >
                        <div class="tag-number">17</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%be%ae%e6%9c%8d%e5%8a%a1">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>微服务</td>
                    <td class="has-text-right" >
                        <div class="tag-number">15</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e9%9b%86%e6%88%90%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>集成开发环境</td>
                    <td class="has-text-right" >
                        <div class="tag-number">14</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/vscode">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>VSCode</td>
                    <td class="has-text-right" >
                        <div class="tag-number">13</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/03-%e5%ae%b9%e5%99%a8%e7%bc%96%e6%8e%92">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>03-容器编排</td>
                    <td class="has-text-right" >
                        <div class="tag-number">12</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/go-kit">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Go-kit</td>
                    <td class="has-text-right" >
                        <div class="tag-number">12</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e6%a0%87%e5%87%86%e5%ba%93">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>标准库</td>
                    <td class="has-text-right" >
                        <div class="tag-number">11</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/grpc">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>gRPC</td>
                    <td class="has-text-right" >
                        <div class="tag-number">10</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/protocol-buffers">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Protocol-Buffers</td>
                    <td class="has-text-right" >
                        <div class="tag-number">9</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/examples">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Examples</td>
                    <td class="has-text-right" >
                        <div class="tag-number">8</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/05-%e5%ae%b9%e5%99%a8%e7%bd%91%e7%bb%9c">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>05-容器网络</td>
                    <td class="has-text-right" >
                        <div class="tag-number">7</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/09-dashboard">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>09-Dashboard</td>
                    <td class="has-text-right" >
                        <div class="tag-number">7</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/10-%e7%ac%94%e8%ae%b0">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>10-笔记</td>
                    <td class="has-text-right" >
                        <div class="tag-number">7</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%b8%b8%e7%94%a8%e5%b7%a5%e5%85%b7">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>常用工具</td>
                    <td class="has-text-right" >
                        <div class="tag-number">7</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%be%ae%e6%9c%8d%e5%8a%a1%e4%b8%9a%e5%8a%a1">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>微服务业务</td>
                    <td class="has-text-right" >
                        <div class="tag-number">7</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/git">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Git</td>
                    <td class="has-text-right" >
                        <div class="tag-number">6</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/mysql">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>MySQL</td>
                    <td class="has-text-right" >
                        <div class="tag-number">6</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/registry">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Registry</td>
                    <td class="has-text-right" >
                        <div class="tag-number">6</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>开发环境配置</td>
                    <td class="has-text-right" >
                        <div class="tag-number">6</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/01-%e5%ae%b9%e5%99%a8%e6%8a%80%e6%9c%af">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>01-容器技术</td>
                    <td class="has-text-right" >
                        <div class="tag-number">5</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/golang">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Golang</td>
                    <td class="has-text-right" >
                        <div class="tag-number">5</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/traefik">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Traefik</td>
                    <td class="has-text-right" >
                        <div class="tag-number">5</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%8e%9f%e7%90%86">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>原理</td>
                    <td class="has-text-right" >
                        <div class="tag-number">5</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/dockerfile-guide">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Dockerfile-Guide</td>
                    <td class="has-text-right" >
                        <div class="tag-number">4</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%ae%98%e6%96%b9%e5%ba%93">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>官方库</td>
                    <td class="has-text-right" >
                        <div class="tag-number">4</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e9%a2%86%e5%9f%9f%e9%a9%b1%e5%8a%a8%e8%ae%be%e8%ae%a1">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>领域驱动设计</td>
                    <td class="has-text-right" >
                        <div class="tag-number">4</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/06-%e4%bd%9c%e4%b8%9a%e8%b0%83%e5%ba%a6%e4%b8%8e%e8%b5%84%e6%ba%90%e7%ae%a1%e7%90%86">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>06-作业调度与资源管理</td>
                    <td class="has-text-right" >
                        <div class="tag-number">3</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/go-web">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Go-Web</td>
                    <td class="has-text-right" >
                        <div class="tag-number">3</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/http">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>HTTP</td>
                    <td class="has-text-right" >
                        <div class="tag-number">3</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/package-net">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>package-net</td>
                    <td class="has-text-right" >
                        <div class="tag-number">3</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%be%ae%e6%9c%8d%e5%8a%a1%e5%b9%b3%e5%8f%b0">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>微服务平台</td>
                    <td class="has-text-right" >
                        <div class="tag-number">3</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/02-%e9%9b%86%e7%be%a4%e6%90%ad%e5%bb%ba">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>02-集群搭建</td>
                    <td class="has-text-right" >
                        <div class="tag-number">2</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/08-%e7%9b%91%e6%8e%a7%e4%b8%8e%e6%97%a5%e5%bf%97">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>08-监控与日志</td>
                    <td class="has-text-right" >
                        <div class="tag-number">2</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/apimachinery">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>apimachinery</td>
                    <td class="has-text-right" >
                        <div class="tag-number">2</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/etcd">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Etcd</td>
                    <td class="has-text-right" >
                        <div class="tag-number">2</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/init-system">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>init-system</td>
                    <td class="has-text-right" >
                        <div class="tag-number">2</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/kit">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>kit</td>
                    <td class="has-text-right" >
                        <div class="tag-number">2</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/package">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>package</td>
                    <td class="has-text-right" >
                        <div class="tag-number">2</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/pkg">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>pkg</td>
                    <td class="has-text-right" >
                        <div class="tag-number">2</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/service-mesh">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Service-mesh</td>
                    <td class="has-text-right" >
                        <div class="tag-number">2</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/04-%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>04-持久化存储</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/07-%e5%ae%b9%e5%99%a8%e8%bf%90%e8%a1%8c%e6%97%b6">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>07-容器运行时</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/goland">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Goland</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/ingress">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Ingress</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/nginx-ingress">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>nginx-ingress</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/package-io">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>package-io</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/package-log">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>package-log</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/package-os">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>package-os</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/package-syscall">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>package-syscall</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/package-text">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>package-text</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/proxy">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Proxy</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/runtime">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>runtime</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/skopeo">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Skopeo</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/transport">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>transport</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/webassembly">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>WebAssembly</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e4%ba%a7%e5%93%81%e6%89%8b%e5%86%8c">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>产品手册</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%85%b3%e4%ba%8e">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>关于</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e5%ae%98%e6%96%b9%e6%96%87%e7%ab%a0">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>官方文章</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>正则表达式</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li></ul>
  </div>
</div>
<script src="/js/jquery-2.2.4.893e90f6230962e42231635df650f20544ad22affc3ee396df768eaa6bc5a6a2.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="></script>
<script src="/js/feather.4.22.0.1ab07abeb9975f283f6b5f29451981be680fbf77ea778f991d457511d210476a.js" integrity="sha256-GrB6vrmXXyg/a18pRRmBvmgPv3fqd4&#43;ZHUV1EdIQR2o="></script>
<script src="/js/modernizr-3.6.0.e013a1e54e3c19d83537ba42b900d34451e5e4b2e789be27a02ac9b152edb741.js" integrity="sha256-4BOh5U48Gdg1N7pCuQDTRFHl5LLnib4noCrJsVLtt0E="></script>
<script src="/js/refresh.f6a5a7cd6b7a72867ff68f6ab208dd115915f6bd3a2269803d3f1835373ad619.js" integrity="sha256-9qWnzWt6coZ/9o9qsgjdEVkV9r06ImmAPT8YNTc61hk="></script>

<script>
  window.MathJax = {
    loader: {
      load: ['core', 'input/tex-base', 'output/chtml'],  
      source: {
        'core': '\/js\/mathjax\/core.d48fedf25c74c54fa6bf79646de92b02155872bdc4f5f7d0bbfc662523d8b4f5.js',
        'input/tex-base': '\/js\/mathjax\/tex-base.1b68b8741dfc54e8f7222f88bea8ffcfc57ac54b2a2d8f4edf6800aa44d49441.js',
        'output/chtml': '\/js\/mathjax\/chtml.926cd166e0f8c1f8a566a718d60c9c58a2b7142b156d30d5f02cec7c3b0ad60a.js',
        'output/chtml/fonts/tex': '\/js\/mathjax\/tex_out.b8b2bb939c0dae84bf1390bfe6d32af13e83f647cdac01d544d2a7a517477e9d.js'
      },
    },
    chtml: {
      fontURL: '/fonts' 
    },
  };
</script>

<script src="/js/mathjax/startup.234a2513e6bdbc1eee06ca19abceca30fe4034e82afb373c08274c1ba2feb1a6.js" integrity="sha256-I0olE&#43;a9vB7uBsoZq87KMP5ANOgq&#43;zc8CCdMG6L&#43;saY="></script>
<script src="/js/highlight.9.18.1.b1c58829c55afcc1f568022af4b08ed8976da404d2990b7535bd8e19c0e3310c.js" integrity="sha256-scWIKcVa/MH1aAIq9LCO2JdtpATSmQt1Nb2OGcDjMQw="></script>
<script src="/js/highlightjs-line-numbers.2.7.0.min.ddfe282e07b7ec1ed069c23f92c7c8216ddb3f1879c4e962d37fd52adbd15a05.js" integrity="sha256-3f4oLge37B7QacI/ksfIIW3bPxh5xOli03/VKtvRWgU="></script>

<script>
  hljs.initHighlightingOnLoad();
  hljs.initLineNumbersOnLoad();
  document.addEventListener('DOMContentLoaded', (event) => {
    document.querySelectorAll('.codeinline').forEach((block) => {
      hljs.highlightBlock(block);
    });
  });
</script>

</body>
</html>