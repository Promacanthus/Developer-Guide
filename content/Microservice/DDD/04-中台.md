---
title: 04-中台
date: 2020-04-14T10:09:14.290627+08:00
draft: false
---

- [0.1. 平台](#01-平台)
- [0.2. 中台](#02-中台)
- [0.3. 前中后台协同](#03-前中后台协同)
  - [0.3.1. 前台](#031-前台)
  - [0.3.2. 中台](#032-中台)
  - [0.3.3. 后台](#033-后台)
- [0.4. DDD、中台和微服务如何协作](#04-ddd中台和微服务如何协作)
  - [0.4.1. 中台建模](#041-中台建模)

## 0.1. 平台

平台只是将部分通用的公共能力独立为共享平台。虽然可以通过 API 或者数据对外提供公共共享服务，解决系统重复建设的问题，但这类平台并没有和企业内的其它平台或应用，实现页面、业务流程和数据从前端到后端的全面融合，并且没有将核心业务服务链路作为一个整体方案考虑，各平台仍然是分离且独立的。

平台解决了公共能力复用的问题，但离中台的目标显然还有一段差距！

## 0.2. 中台

阿里对中台的定义：“中台是一个基础的理念和架构，把所有的基础服务用中台的思路建设，进行联通，共同支持上端的业务。业务中台更多的是支持在线业务，数据中台提供了基础数据处理能力和很多的数据产品给所有业务方去用。业务中台、数据中台、算法中台等等一起提供对上层业务的支撑。”

思特沃克对中台的定义：“中台是企业级能力复用平台。”

- 联通是前台以及中台之间的联通
- 融合是前台流程和数据的融合
- 并以共享的方式支持前端一线业务的发展和创新

中台首先体现的是一种企业级的能力，它提供的是一套企业级的整体解决方案，解决小到企业、集团，大到生态圈的能力共享、联通和融合问题，支持业务和商业模式创新。通过平台联通和数据融合为用户提供一致的体验，更敏捷地支撑前台一线业务。

中台来源于平台，但中台和平台相比，它更多体现的是一种理念的转变，它主要体现在这三个关键能力上：对前台业务的快速响应能力；企业级复用能力；从前台、中台到后台的设计、研发、页面操作、流程服务和数据的无缝联通、融合能力。

其中最关键的是快速响应能力和企业级的无缝联通和融合能力，尤其是对于跨业经营的超大型企业来说至关重要。

相对互联网企业而言，传统企业的渠道应用更多样化，有面向内部人员的门店类应用、面向外部用户的互联网电商以及移动 APP 类应用。这些应用面向的用户和场景可能不同，但其功能类似，基本涵盖了核心业务能力。此外，传统企业也会将部分核心应用的页面或 API 服务能力开放给生态圈第三方，相互借力发展。

为了适应不同业务和渠道的发展，过去很多企业的做法是开发很多独立的应用或 APP。但由于 IT 系统建设初期并没有企业级的整体规划，平台之间融合不好，就导致了用户体验不好，最关键的是用户并不想装那么多 APP。

为了提升用户体验，实现统一运营，很多企业开始缩减 APP 的数量，开始通过一个 APP 集成企业内的所有能力，联通前台所有的核心业务链路。

由于传统企业的商业模式和 IT 系统建设发展的历程与互联网企业不是完全一样的，因此传统企业的中台建设策略与阿里中台战略也应该有所差异，需要共享的内容也不一样。

![image](/images/middle-level.jpg)

由于渠道多样化:

- 传统企业不仅要将通用能力中台化，以实现通用能力的沉淀、共享和复用，这里的通用能力对应 DDD 的通用域或支撑域；
- 传统企业还需要将核心能力中台化，以满足不同渠道的核心业务能力共享和复用的需求，避免传统核心和互联网不同渠道应用出现“后端双核心、前端两张皮”的问题，这里的核心能力对应 DDD 的核心域。

这就属于业务中台的范畴了，我们需要解决核心业务链路的联通和不同渠道服务共享的问题。

除此之外，还需要解决系统微服务拆分后的数据孤岛、数据融合和业务创新等问题，这就属于数据中台的范畴了，尤其是当我们采用分布式架构以后，就更应该关注微服务拆分后的数据融合和共享问题了。

综上，在中台设计和规划时，需要整体考虑企业内前台、中台以及后台应用的协同，实现不同渠道应用的前端页面、流程和服务的共享，还有核心业务链路的联通以及前台流程和数据的融合、共享，支持业务和商业模式的创新。

## 0.3. 前中后台协同

企业级能力往往是前中后台协同作战能力的体现。

- 如果把业务中台比作陆军、火箭军和空军等专业军种的话，它主要发挥战术专业能力。前台就是作战部队，它需要根据前线的战场需求，对业务中台的能力进行调度，实现能力融合和效率最大化。
- 而数据中台就是信息情报中心和联合作战总指挥部，它能够汇集各种数据、完成分析，制定战略和战术计划。后台就是后勤部队，提供技术支持。

### 0.3.1. 前台

传统企业的早期系统有不少是基于业务领域或组织架构来建设的，每个系统都有自己的前端，相互独立，用户操作是竖井式，需要登录多个系统才能完成完整的业务流程。

![image](/images/zaoqixitong.jpg)

中台化后的前台建设要有一套综合考虑业务边界、流程和平台的整体解决方案，以实现各不同中台前端操作、流程和界面的联通、融合。不管后端有多少个中台，前端用户感受到的就是只有一个前台。

![image](/images/liucheng.jpg)

在前台设计中可以借鉴微前端的设计思想，在企业内不仅实现前端解耦和复用，还可以根据核心链路和业务流程，通过对微前端页面的动态组合和流程编排，实现前台业务的融合。

前端页面可以很自然地融合到不同的终端和渠道应用核心业务链路中，实现前端页面、流程和功能复用。

### 0.3.2. 中台

传统企业的核心业务大多是基于集中式架构开发的，而单体系统存在扩展性和弹性伸缩能力差的问题，因此无法适应忽高忽低的互联网业务场景。而数据类应用也多数通过 ETL 工具抽取数据实现数据建模、统计和报表分析功能，但由于数据时效和融合能力不够，再加上传统数据类应用本来就不是为前端而生的，因此难以快速响应前端一线业务。

业务中台的建设可采用领域驱动设计方法，通过领域建模，将可复用的公共能力从各个单体剥离，沉淀并组合，采用微服务架构模式，建设成为可共享的通用能力中台。同样的，可以将核心能力用微服务架构模式，建设成为可面向不同渠道和场景的可复用的核心能力中台。

业务中台向前台、第三方和其它中台提供 API 服务，实现通用能力和核心能力的复用。

![image](/images/middle-arch.jpg)

在将传统集中式单体按业务职责和能力细分为微服务，建设中台的过程中，会产生越来越多的独立部署的微服务。这样做虽然提升了应用弹性和高可用能力，但由于微服务的物理隔离，原来一些系统内的调用会变成跨微服务调用，再加上前后端分离，微服务拆分会导致数据进一步分离，增加企业级应用集成的难度。

如果没有合适的设计和指导思想，处理不好前台、中台和后台的关系，将会进一步加剧前台流程和数据的孤岛化、碎片化。

**数据中台的主要目标是打通数据孤岛，实现业务融合和创新**，包括三大主要职能：

1. 一是：完成企业全域数据的采集与存储，实现各不同业务类别中台数据的汇总和集中管理。
2. 二是：按照标准的数据规范或数据模型，将数据按照不同主题域或场景进行加工和处理，形成面向不同主题和场景的数据应用，比如客户视图、代理人视图、渠道视图、机构视图等不同数据体系。
3. 三是：建立业务需求驱动的数据体系，基于各个维度的数据，深度萃取数据价值，支持业务和商业模式的创新。

相应的，数据中台的建设就可分为三步走：

1. 第一步：实现各中台业务数据的汇集，解决数据孤岛和初级数据共享问题。
2. 第二步：实现企业级实时或非实时全维度数据的深度融合、加工和共享。
3. 第三步：萃取数据价值，支持业务创新，加速从数据转换为业务价值的过程。

数据中台不仅限于分析型场景，也适用于交易型场景。它可以建立在数据仓库或数据平台之上，将数据服务化之后提供给业务系统。基于数据库日志捕获的技术，使数据的时效性大大提升，这样就可以为交易型场景提供很好的支撑。

综上，数据中台主要完成数据的融合和加工，萃取数据业务价值，支持业务创新，对外提供数据共享服务。

### 0.3.3. 后台

- 前台：主要面向客户以及终端销售者，实现营销推广以及交易转化；
- 中台：主要面向运营人员，完成运营支撑；
- 后台：主要面向后台管理人员，实现流程审核、内部管理以及后勤支撑，比如采购、人力、财务和 OA 等系统。

对于后台，为了实现内部的管理要求，很多人习惯性将这些管理要求嵌入到核心业务流程中。而一般来说这类内控管理需求对权限、管控规则和流程等要求都比较高，但是大部分管理人员只是参与了某个局部业务环节的审核。这类复杂的管理需求，会凭空增加不同渠道应用前台界面和核心流程的融合难度以及软件开发的复杂度。

在设计流程审核和管理类功能的时候，可以考虑按角色或岗位进行功能聚合，将复杂的管理需求从通用的核心业务链路中剥离，参考小程序的建设模式，通过特定程序入口嵌入前台 APP 或应用中。

管理需求从前台核心业务链路剥离后，前台应用将具有更好的通用性，它可以更加容易地实现各渠道前台界面和流程的融合。一个前台应用或 APP 可以无差别地同时面向外部互联网用户和内部业务人员，从而促进传统渠道与互联网渠道应用前台的融合。

企业的中台转型不只是中台的工作，需要整体考虑前台、中台和后台的协同、共享、联通和融合。前台通过页面和流程共享实现不同渠道应用之间的前台融合，中台通过 API 实现服务共享。而前台、业务中台和数据中台的融合可以实现传统应用与互联网应用的融合，从而解决“后端双核心、前端两张皮”的问题。能力复用了，前台流程和数据融合了，才能更好地支持业务的融合和商业模式的创新。

## 0.4. DDD、中台和微服务如何协作

中台是抽象出来的业务模型，微服务是业务模型的系统实现，DDD 作为方法论可以同时指导中台业务建模和微服务建设，三者相辅相成，完美结合。

DDD 有两把利器，那就是它的战略设计和战术设计方法。

中台在企业架构上更多偏向**业务模型**，形成中台的过程实际上也是业务领域不断细分的过程。在这个过程中会将同类通用的业务能力进行聚合和业务重构，再根据限界上下文和业务内聚的原则建立领域模型。而 DDD 的战略设计最擅长的就是领域建模。

在中台完成领域建模后，就需要通过微服务来完成系统建设。此时，DDD 的战术设计又恰好可以与微服务的设计完美结合。中台和微服务正是 DDD 实战的最佳场景。

> 中台的本质其实就是提炼各个业务板块的共同需求，进行业务和系统抽象，形成通用的可复用的业务模型，打造成组件化产品，供前台部门使用。前台要做什么业务，需要什么资源，可以直接找中台，不需要每次都去改动自己的底层。

传统企业可以将需要共享的公共能力进行领域建模，建设可共享的通用中台，还会将核心能力进行领域建模，建设面向不同渠道的可复用的核心中台。这里的通用中台和核心中台都属于业务中台的范畴。

DDD 的子域分为核心域、通用域和支撑域。划分这几个子域的主要目的是为了**确定战略资源的投入**，一般来说战略投入的重点是核心域，因此后面可以暂时不严格区分支撑域和通用域。

领域、中台以及微服务虽然属于不同层面的东西，但还是可以将他们分解对照，整理出来它们之间的关系。下面这张图从 DDD 领域建模和中台建设这两个不同的视角对同一个企业的业务架构进行分析。

![image](/images/duibi.png)

从领域功能属性和重要性对照来看，通用中台对应 DDD 的通用域和支撑域，核心中台对应 DDD 的核心域。从领域的功能范围来看，子域与中台是一致的。领域模型所在的限界上下文对应微服务。建立了映射关系，就可以用 DDD 来进行中台业务建模。

保险域的业务中台分为两类：

- 第一类是：提供保险核心业务能力的核心中台（比如营销、承保和理赔等业务）；
- 第二类是：支撑核心业务流程完成保险全流程的通用中台（比如订单、支付、客户和用户等）。

根据 DDD 首先要建立通用语言的原则，在将 DDD 的方法引入中台设计时，要先建立中台和 DDD 的通用语言。这里的子域与中台是一致的，那就可以将子域统一为中台。

中台通过事件风暴可以进一步细分，最终完成业务领域建模。中台业务领域的功能不同，限界上下文的数量和大小就会不一样，领域模型也会不一样。

当完成业务建模后，就可以采用 DDD 战术设计，设计出聚合、实体、领域事件、领域服务以及应用服务等领域对象，再利用分层架构模型完成微服务的设计。

以上就是 DDD、中台和微服务在应用过程中的协作模式。

### 0.4.1. 中台建模

中台业务抽象的过程就是业务建模的过程，对应 DDD 的战略设计。

系统抽象的过程就是微服务的建设过程，对应 DDD 的战术设计。

结合 DDD 领域建模的方法，进行中台业务建模的过程。

第一步：按照业务流程（通常适用于核心域）或者功能属性、集合（通常适用于通用域或支撑域），将业务域细分为多个中台，再根据功能属性或重要性归类到核心中台或通用中台。核心中台设计时要考虑核心竞争力，通用中台要站在企业高度考虑共享和复用能力。

第二步：选取中台，根据用例、业务场景或用户旅程完成事件风暴，找出实体、聚合和限界上下文。依次进行领域分解，建立领域模型。由于不同中台独立建模，某些领域对象或功能可能会重复出现在其它领域模型中，也有可能本该是同一个聚合的领域对象或功能，却分散在其它的中台里，这样会导致领域模型不完整或者业务不内聚。这里先不要着急，这一步我们只需要初步确定主领域模型就可以了，在第三步中我们还会提炼并重组这些领域对象。

第三步：以主领域模型为基础，扫描其它中台领域模型，检查并确定是否存在重复或者需要重组的领域对象、功能，提炼并重构主领域模型，完成最终的领域模型设计。

第四步：选择其它主领域模型重复第三步，直到所有主领域模型完成比对和重构。

第五步：基于领域模型完成微服务设计，完成系统落地。

![image](/images/zhongtaijianmoguocheng.png)

DDD 战略设计包括上述的第一步到第四步，主要为：业务域分解为中台，对中台归类，完成领域建模，建立中台业务模型。DDD 战术设计是第五步，领域模型映射为微服务，完成中台建设。

![image](/images/baoxianlizi.png)

以保险领域为例的话，完成领域建模后，里面的数据就可以填上了。这里选取通用中台的用户、客户和订单三个中台来做示例。

客户中台提炼出了两个领域模型：客户信息和客户视图模型。

用户中台提炼出了三个领域模型：用户管理、登录认证和权限模型。

订单中台提炼出了订单模型。
